<?xml version="1.0" encoding="UTF-8"?>
<report xmlns="http://www.eclipse.org/birt/2005/design" version="3.2.23" id="1">
    <property name="createdBy">Eclipse BIRT Designer Version 4.8.0.v201806261756</property>
    <list-property name="userProperties">
        <structure>
            <property name="name">Cube de données.EBZR_Synth_Tab1.x</property>
            <property name="type">integer</property>
            <property name="isVisible">false</property>
        </structure>
        <structure>
            <property name="name">Cube de données.EBZR_Synth_Tab1.y</property>
            <property name="type">integer</property>
            <property name="isVisible">false</property>
        </structure>
        <structure>
            <property name="name">EBZR_Synth_Cube.EBZR_Synth_BilanMenacePerso.x</property>
            <property name="type">integer</property>
            <property name="isVisible">false</property>
        </structure>
        <structure>
            <property name="name">EBZR_Synth_Cube.EBZR_Synth_BilanMenacePerso.y</property>
            <property name="type">integer</property>
            <property name="isVisible">false</property>
        </structure>
    </list-property>
    <property name="Cube de données.EBZR_Synth_Tab1.x">135</property>
    <property name="Cube de données.EBZR_Synth_Tab1.y">80</property>
    <property name="EBZR_Synth_Cube.EBZR_Synth_BilanMenacePerso.x">135</property>
    <property name="EBZR_Synth_Cube.EBZR_Synth_BilanMenacePerso.y">80</property>
    <property name="units">in</property>
    <method name="initialize"><![CDATA[if(params["FileObs"]!="") {
	// Périmetre personnalisé
	reportContext.getDesignHandle().findElement("EBZR_Graph_Menace_S").setProperty("dataSet", "EBZR_Synth_MenacePerso");
	reportContext.getDesignHandle().findElement("EBZR_Txt_Menace_Evalue").setProperty("dataSet", "EBZR_Synth_TotalMenacePerso");
	reportContext.getDesignHandle().findElement("EBZR_Graph_Protection_S").setProperty("dataSet", "EBZR_Synth_ProtectionPerso");
	reportContext.getDesignHandle().findCube("EBZR_Synth_Cube").setProperty("dataSet", "EBZR_Synth_BilanMenacePerso");
	reportContext.getDesignHandle().findElement("EBZR_Tbl_Bilan_Milieux_Habitats").setProperty("dataSet", "EBZR_Synth_BilanMilieuxPerso");
	importPackage(java.io);
	br = new BufferedReader(new FileReader("./webapps/birt/report/listeobs/" + params["FileObs"]));
	idObs = br.readLine();
	reportContext.setPageVariable("ListeIdObs", idObs);
	br.close();
	br = new BufferedReader(new FileReader("./webapps/birt/report/listeobs/" + params["FileObs"] + ".wkt"));
	geomObs = br.readLine();
	reportContext.setPageVariable("GeomObs", geomObs);
	br.close();
}

if(params["FileZonage"]!="") {
	importPackage(java.io);
	br = new BufferedReader(new FileReader("./webapps/birt/report/listezonage/" + params["FileZonage"]));
	idZonage = br.readLine();
	reportContext.setPageVariable("ListeIdZonage", idZonage);
	br.close();
}

if(params["Tbl_Echelon"]!="") {
	reportContext.getDesignHandle().findElement("EBZR_Graph_Menace_S").setProperty("dataSet", "EBZR_Synth_MenaceEchelon");
	reportContext.getDesignHandle().findElement("EBZR_Txt_Menace_Evalue").setProperty("dataSet", "EBZR_Synth_TotalMenaceEchelon");
	reportContext.getDesignHandle().findElement("EBZR_Graph_Protection_S").setProperty("dataSet", "EBZR_Synth_ProtectionEchelon");
	reportContext.getDesignHandle().findCube("EBZR_Synth_Cube").setProperty("dataSet", "EBZR_Synth_BilanMenaceEchelon");
	reportContext.getDesignHandle().findElement("EBZR_Tbl_Bilan_Milieux_Habitats").setProperty("dataSet", "EBZR_Synth_BilanMilieuxEchelon");
}]]></method>
    <property name="iconFile">/templates/blank_report.gif</property>
    <property name="layoutPreference">auto layout</property>
    <property name="bidiLayoutOrientation">ltr</property>
    <property name="imageDPI">96</property>
    <parameters>
        <scalar-parameter name="ID_Zonage" id="211">
            <property name="valueType">static</property>
            <property name="isRequired">true</property>
            <expression name="sortByColumn">dataSetRow["gez_id_geom_zonage"]</expression>
            <property name="sortDirection">asc</property>
            <property name="dataType">string</property>
            <property name="distinct">true</property>
            <simple-property-list name="defaultValue">
                <value type="constant">1500000127</value>
            </simple-property-list>
            <list-property name="selectionList"/>
            <property name="paramType">simple</property>
            <property name="concealValue">false</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="Nom_Table" id="706">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="distinct">true</property>
            <simple-property-list name="defaultValue">
                <value type="constant">tv_taxon_observe_commune</value>
            </simple-property-list>
            <list-property name="selectionList"/>
            <property name="paramType">simple</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="Tbl_Echelon" id="1970">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="distinct">true</property>
            <list-property name="selectionList"/>
            <property name="paramType">simple</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="FileObs" id="1974">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="distinct">true</property>
            <list-property name="selectionList"/>
            <property name="paramType">simple</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="EchelonSup" id="1998">
            <property name="valueType">static</property>
            <property name="dataType">string</property>
            <property name="distinct">true</property>
            <simple-property-list name="defaultValue">
                <value type="constant">1</value>
            </simple-property-list>
            <list-property name="selectionList"/>
            <property name="paramType">simple</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="pdf" id="2076">
            <property name="valueType">static</property>
            <property name="dataType">string</property>
            <property name="distinct">true</property>
            <simple-property-list name="defaultValue">
                <value type="constant">f</value>
            </simple-property-list>
            <list-property name="selectionList"/>
            <property name="paramType">simple</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="title" id="2078">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="distinct">true</property>
            <list-property name="selectionList"/>
            <property name="paramType">simple</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="FileZonage" id="2117">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="distinct">true</property>
            <list-property name="selectionList"/>
            <property name="paramType">simple</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="region" id="2119">
            <property name="valueType">static</property>
            <property name="dataType">string</property>
            <property name="distinct">true</property>
            <list-property name="selectionList"/>
            <property name="paramType">simple</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
    </parameters>
    <data-sources>
        <oda-data-source extensionID="org.eclipse.birt.report.data.oda.jdbc" name="Sigogne3" id="7">
            <list-property name="privateDriverProperties">
                <ex-property>
                    <name>metadataBidiFormatStr</name>
                    <value>ILYNN</value>
                </ex-property>
                <ex-property>
                    <name>disabledMetadataBidiFormatStr</name>
                </ex-property>
                <ex-property>
                    <name>contentBidiFormatStr</name>
                    <value>ILYNN</value>
                </ex-property>
                <ex-property>
                    <name>disabledContentBidiFormatStr</name>
                </ex-property>
            </list-property>
            <property name="odaDriverClass">org.postgresql.Driver</property>
            <property name="odaURL">jdbc:postgresql://91.206.199.53:5432/mefc</property>
            <property name="odaUser">postgres</property>
            <encrypted-property name="odaPassword" encryptionID="base64">UGdGb3JTaWcwZ24/</encrypted-property>
        </oda-data-source>
    </data-sources>
    <data-sets>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="EBZR_Synth_BilanMilieux" id="611">
            <list-property name="columnHints"/>
            <list-property name="parameters">
                <structure>
                    <property name="name">param_1</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">1</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_2</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">2</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_3</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">3</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_4</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">4</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_5</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">5</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
            </list-property>
            <structure name="cachedMetaData"/>
            <method name="beforeOpen"><![CDATA[var sArr = params["Nom_Table"].value.split("_") ; this.queryText=this.queryText.replaceAll('param_table_geom', 'tv_geom_zonages_'+sArr[3]);
this.queryText=this.queryText.replaceAll('ListeIdZonage', reportContext.getPageVariable("ListeIdZonage"));]]></method>
            <property name="dataSource">Sigogne3</property>
            <list-property name="resultSet"/>
            <xml-property name="queryText"><![CDATA[--------------------------------------------------
--Mares
SELECT
	'mare' as milieu,
	count(*) as nbtot,
	'0' as superficie
FROM
	param_table_geom c,
	tv_geom_zonages_mare m
WHERE
	ST_Contains(c.gez_geometry, m.gez_geometry)
	and c.gez_id_geom_zonage in ListeIdZonage
GROUP BY 
	c.gez_id_geom_zonage

UNION ALL
-------------------------------------------------------
--Zone humides
SELECT
	'milieu humide' as milieu,
	count(*) as nbtot,
	coalesce(ceil(SUM(ST_Area(zh.gez_geometry)) / 10000), 0) as superficie
FROM
	param_table_geom c,
	tv_geom_zonages_zones_humides zh
WHERE
	ST_Intersects(c.gez_geometry, zh.gez_geometry)
and c.gez_id_geom_zonage in ListeIdZonage

UNION ALL
---------------------------------------------------
--Habitat prio
SELECT
	'habitat prioritaire' as milieu,
	count(*) as nbtot,
	coalesce(ceil(SUM(ST_Area(h.lpo_geometry)) / 10000), 0) as superficie
FROM
	param_table_geom c,
	tv_obs_habitat_interet_polygone h
WHERE
	ST_Intersects(c.gez_geometry, h.lpo_geometry)
	and (oha_interet_n2000 = 'p' OR oha_interet_n2000 = 'PR')
	and c.gez_id_geom_zonage in ListeIdZonage
GROUP BY 
	c.gez_id_geom_zonage

UNION ALL
-----------------------------------------------------
--Habitats intérêt communautaire
SELECT
	'habitat d''intérêt communautaire' as milieu,
	count(*) as nbtot,
	coalesce(ceil(SUM(ST_Area(h.lpo_geometry)) / 10000), 0) as superficie 
FROM
	param_table_geom c,
	tv_obs_habitat_interet_polygone h
WHERE
	ST_Intersects(c.gez_geometry, h.lpo_geometry)
and (oha_interet_n2000 = 'c' OR oha_interet_n2000 = 'IC')
and c.gez_id_geom_zonage in ListeIdZonage
GROUP BY 
	c.gez_id_geom_zonage

UNION ALL
-------------------------------------------------------
--Habitats intérêt régional
SELECT
	'habitat d''intérêt régional' as milieu,
	count(*) as nbtot,
	coalesce(ceil(SUM(ST_Area(h.lpo_geometry)) / 10000), 0) as superficie 
FROM
	param_table_geom c,
	tv_obs_habitat_interet_polygone h
WHERE
	ST_Intersects(c.gez_geometry, h.lpo_geometry)
and (oha_interet_n2000 = 'r' OR oha_interet_n2000 = 'IF' OR oha_interet_n2000 = 'IR')
and c.gez_id_geom_zonage in ListeIdZonage;]]></xml-property>
            <xml-property name="designerValues"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<model:DesignValues xmlns:design="http://www.eclipse.org/datatools/connectivity/oda/design" xmlns:model="http://www.eclipse.org/birt/report/model/adapter/odaModel">
  <Version>2.0</Version>
  <design:ResultSets derivedMetaData="true">
    <design:resultSetDefinitions>
      <design:resultSetColumns>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>milieu</design:name>
              <design:position>1</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>2147483647</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>milieu</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>milieu</design:label>
            <design:formattingHints>
              <design:displaySize>2147483647</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>nbtot</design:name>
              <design:position>2</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>-5</design:nativeDataTypeCode>
            <design:precision>19</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>nbtot</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>nbtot</design:label>
            <design:formattingHints>
              <design:displaySize>20</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>superficie</design:name>
              <design:position>3</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>8</design:nativeDataTypeCode>
            <design:precision>17</design:precision>
            <design:scale>17</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>superficie</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>superficie</design:label>
            <design:formattingHints>
              <design:displaySize>25</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
      </design:resultSetColumns>
      <design:criteria/>
    </design:resultSetDefinitions>
  </design:ResultSets>
</model:DesignValues>]]></xml-property>
        </oda-data-set>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="EBZR_Synth_BilanMilieuxPerso" id="1996">
            <list-property name="columnHints">
                <structure>
                    <property name="columnName">milieu</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">milieu</text-property>
                    <text-property name="heading">milieu</text-property>
                </structure>
                <structure>
                    <property name="columnName">nbtot</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">nbtot</text-property>
                    <text-property name="heading">nbtot</text-property>
                </structure>
                <structure>
                    <property name="columnName">superficie</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">superficie</text-property>
                    <text-property name="heading">superficie</text-property>
                </structure>
            </list-property>
            <list-property name="parameters"/>
            <structure name="cachedMetaData">
                <list-property name="resultSet">
                    <structure>
                        <property name="position">1</property>
                        <property name="name">milieu</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">2</property>
                        <property name="name">nbtot</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">3</property>
                        <property name="name">superficie</property>
                        <property name="dataType">float</property>
                    </structure>
                </list-property>
            </structure>
            <method name="beforeOpen"><![CDATA[this.queryText=this.queryText.replaceAll('WKTArea', reportContext.getPageVariable("GeomObs"));]]></method>
            <property name="dataSource">Sigogne3</property>
            <list-property name="resultSet">
                <structure>
                    <property name="position">1</property>
                    <property name="name">milieu</property>
                    <property name="nativeName">milieu</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">12</property>
                </structure>
                <structure>
                    <property name="position">2</property>
                    <property name="name">nbtot</property>
                    <property name="nativeName">nbtot</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">-5</property>
                </structure>
                <structure>
                    <property name="position">3</property>
                    <property name="name">superficie</property>
                    <property name="nativeName">superficie</property>
                    <property name="dataType">float</property>
                    <property name="nativeDataType">8</property>
                </structure>
            </list-property>
            <xml-property name="queryText"><![CDATA[--------------------------------------------------
--Mares
SELECT
	'mare' as milieu,
	count(*) as nbtot,
	'0' as superficie
FROM
	tv_geom_zonages_mare m
WHERE
	ST_Contains(St_Transform(ST_GeomFromText('WKTArea', 3857), 2154), m.gez_geometry)
UNION ALL
-------------------------------------------------------
--Zone humides
SELECT
	'milieu humide' as milieu,
	count(*) as nbtot,
	coalesce(ceil(SUM(ST_Area(zh.gez_geometry)) / 10000), 0) as superficie
FROM
	tv_geom_zonages_zones_humides zh
WHERE
	ST_Intersects(St_Transform(ST_GeomFromText('WKTArea', 3857), 2154), zh.gez_geometry)
UNION ALL
---------------------------------------------------
--Habitat prio
SELECT
	'habitat prioritaire' as milieu,
	count(*) as nbtot,
	coalesce(ceil(SUM(ST_Area(h.lpo_geometry)) / 10000), 0) as superficie
FROM
	tv_obs_habitat_interet_polygone h
WHERE
	ST_Intersects(St_Transform(ST_GeomFromText('WKTArea', 3857), 2154), h.lpo_geometry)
and (oha_interet_n2000 = 'p' OR oha_interet_n2000 = 'PR')
UNION ALL
-----------------------------------------------------
--Habitats intérêt communautaire
SELECT
	'habitat d''intérêt communautaire' as milieu,
	count(*) as nbtot,
	coalesce(ceil(SUM(ST_Area(h.lpo_geometry)) / 10000), 0) as superficie 
FROM
	tv_obs_habitat_interet_polygone h
WHERE
	ST_Intersects(St_Transform(ST_GeomFromText('WKTArea', 3857), 2154), h.lpo_geometry)
AND (oha_interet_n2000 = 'c' OR oha_interet_n2000 = 'IC')
UNION ALL
-------------------------------------------------------
--Habitats intérêt régional
SELECT
	'habitat d''intérêt régional' as milieu,
	count(*) as nbtot,
	coalesce(ceil(SUM(ST_Area(h.lpo_geometry)) / 10000), 0) as superficie 
FROM
	tv_obs_habitat_interet_polygone h
WHERE
	ST_Intersects(St_Transform(ST_GeomFromText('WKTArea', 3857), 2154), h.lpo_geometry)
AND oha_interet_n2000 = 'r' OR oha_interet_n2000 = 'IR' OR oha_interet_n2000 = 'IF')

]]></xml-property>
            <xml-property name="designerValues"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<model:DesignValues xmlns:design="http://www.eclipse.org/datatools/connectivity/oda/design" xmlns:model="http://www.eclipse.org/birt/report/model/adapter/odaModel">
  <Version>2.0</Version>
  <design:ResultSets derivedMetaData="true">
    <design:resultSetDefinitions>
      <design:resultSetColumns>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>milieu</design:name>
              <design:position>1</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>2147483647</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>milieu</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>milieu</design:label>
            <design:formattingHints>
              <design:displaySize>2147483647</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>nbtot</design:name>
              <design:position>2</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>-5</design:nativeDataTypeCode>
            <design:precision>19</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>nbtot</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>nbtot</design:label>
            <design:formattingHints>
              <design:displaySize>20</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>superficie</design:name>
              <design:position>3</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>8</design:nativeDataTypeCode>
            <design:precision>17</design:precision>
            <design:scale>17</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>superficie</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>superficie</design:label>
            <design:formattingHints>
              <design:displaySize>25</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
      </design:resultSetColumns>
      <design:criteria/>
    </design:resultSetDefinitions>
  </design:ResultSets>
</model:DesignValues>]]></xml-property>
        </oda-data-set>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="EBZR_Synth_BilanMenace" id="634">
            <property name="nullsOrdering">nulls lowest</property>
            <list-property name="columnHints"/>
            <list-property name="parameters">
                <structure>
                    <property name="name">param_1</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">1</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_2</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">2</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_3</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">3</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_4</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">4</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_5</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">5</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_6</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">6</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_7</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">7</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_8</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">8</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_9</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">9</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_10</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">10</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_11</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">11</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_12</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">12</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
            </list-property>
            <structure name="cachedMetaData"/>
            <method name="beforeOpen"><![CDATA[this.queryText=this.queryText.replaceAll('param_table', params["Nom_Table"]);
this.queryText=this.queryText.replaceAll('ListeIdZonage', reportContext.getPageVariable("ListeIdZonage"));


//region B FC ou entre les deux ?
var region=params["region"];

if (region=="B" )
{
  	this.queryText=this.queryText.replaceAll('region', 66);
}
else if(region=="FC" )
{
	this.queryText=this.queryText.replaceAll('region', 33);
}
else
{
	this.queryText=this.queryText.replaceAll('region', 0);
}]]></method>
            <property name="dataSource">Sigogne3</property>
            <list-property name="resultSet"/>
            <xml-property name="queryText"><![CDATA[-- nombre des taxons menacés et quasi menacés avec groupe taxonomique pour la commune choisie
--total
SELECT 'menace' as rowname, count(distinct(tao_id_taxon)), 'total' as gta_nom_groupe_taxonomique
FROM (
SELECT
a.tao_id_taxon,
max(b.sta_nom_statut) AS max_statut_uicn,
Max(d.indice_menace) as indice_menace_max,
max(gta_nom_groupe_taxonomique) as gta_nom_groupe_taxonomique,
1 as ordre
FROM t_taxon_observe a
 
JOIN tj_taxon_a_statut f ON a.tao_id_taxon = f.tao_id_taxon
LEFT OUTER JOIN tr_statut b ON f.sta_id_statut = b.sta_id_statut AND ( b.tst_id_type_statut = region OR b.tst_id_type_statut = 23)
JOIN param_table c ON a.tao_id_taxon = c.tao_id_taxon
LEFT JOIN zz_qualif_menace d ON b.sta_nom_statut ilike d.sta_nom_statut
JOIN tr_groupe_taxonomique e ON a.gta_id_groupe_taxonomique = e.gta_id_groupe_taxonomique

WHERE gez_id_geom_zonage in ListeIdZonage

GROUP BY a.tao_id_taxon
HAVING MAX(indice_menace) > 5 ) f


UNION ALL


SELECT --MAX(indice_menace) as menace_max,tao_id_taxon,
'menace' as rowname,count(distinct(tao_id_taxon)) as count,gta_nom_groupe_taxonomique
FROM (

SELECT
a.tao_id_taxon,
max(b.sta_nom_statut) AS max_statut_uicn,
Max(d.indice_menace) as indice_menace_max,
	max(gta_nom_groupe_taxonomique) as gta_nom_groupe_taxonomique,
2 as ordre
FROM t_taxon_observe a
 
JOIN tj_taxon_a_statut f ON a.tao_id_taxon = f.tao_id_taxon
LEFT OUTER JOIN tr_statut b ON f.sta_id_statut = b.sta_id_statut AND ( b.tst_id_type_statut = region OR b.tst_id_type_statut = 23)
JOIN param_table c ON a.tao_id_taxon = c.tao_id_taxon
LEFT JOIN zz_qualif_menace d ON b.sta_nom_statut ilike d.sta_nom_statut
JOIN tr_groupe_taxonomique e ON a.gta_id_groupe_taxonomique = e.gta_id_groupe_taxonomique
WHERE gez_id_geom_zonage in ListeIdZonage


GROUP BY a.tao_id_taxon,gta_nom_groupe_taxonomique,ordre
HAVING MAX(indice_menace) > 5  ) f
group by gta_nom_groupe_taxonomique,ordre


UNION ALL


-- nombre des taxons protégés au niveau national et régional avec groupe taxonomique pour la commune choisie
--total

SELECT 'protection' as rowname,sum(tao_id_taxon) as nb_especes_protegees,'total' as gta_nom_groupe_taxonomique

FROM (

SELECT count(distinct(a.tao_id_taxon)) as tao_id_taxon

FROM param_table a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref

WHERE gez_id_geom_zonage in ListeIdZonage
AND c.tae_cd_protection IN('IBOAC','IBOAE','IBOAS','IBOAW','IBOC','IBOEU','IBO1','CD01') 
AND tar_id_rang >= 193
UNION

SELECT count(distinct(a.tao_id_taxon)) as tao_id_taxon

FROM param_table a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref

WHERE gez_id_geom_zonage in ListeIdZonage
AND c.tae_cd_protection IN('cricetus_1','E70P2','gypaete1','NAR2','NAR3','NAR4','NAR5','NAR6','NEC1','NI2','NI3','NM2','NMO2','NMO3','NMO4','NO3','NO4','NP1','NV1','NV2','OC2','OC4','OC5','V25P1','V39P1','V70P2')
AND tar_id_rang >= 193
UNION

SELECT count(distinct(a.tao_id_taxon)) as tao_id_taxon

FROM param_table a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref

WHERE gez_id_geom_zonage in ListeIdZonage
AND c.tae_cd_protection in ('RV43','RV26')
AND tar_id_rang >= 193

) t

UNION ALL

SELECT 'protection' as rowname,sum(tao_id_taxon) as nb_especes_protegees, gta_nom_groupe_taxonomique

FROM(

SELECT count(distinct(a.tao_id_taxon)) as tao_id_taxon,gta_nom_groupe_taxonomique

FROM param_table a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref
LEFT JOIN t_taxref_reglementation d ON c.tae_cd_protection = d.tae_cd_protection
JOIN t_taxon_observe e ON a.tao_id_taxon = e.tao_id_taxon
JOIN tr_groupe_taxonomique f ON e.gta_id_groupe_taxonomique = f.gta_id_groupe_taxonomique


WHERE gez_id_geom_zonage in ListeIdZonage
AND c.tae_cd_protection IN('IBOAC','IBOAE','IBOAS','IBOAW','IBOC','IBOEU','IBO1','CD01')
AND tar_id_rang >= 193
GROUP BY gta_nom_groupe_taxonomique

UNION

SELECT count(distinct(a.tao_id_taxon)) as tao_id_taxon,gta_nom_groupe_taxonomique

FROM param_table a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref
LEFT JOIN t_taxref_reglementation d ON c.tae_cd_protection = d.tae_cd_protection
JOIN t_taxon_observe e ON a.tao_id_taxon = e.tao_id_taxon
JOIN tr_groupe_taxonomique f ON e.gta_id_groupe_taxonomique = f.gta_id_groupe_taxonomique


WHERE gez_id_geom_zonage in ListeIdZonage
AND c.tae_cd_protection IN('cricetus_1','E70P2','gypaete1','NAR2','NAR3','NAR4','NAR5','NAR6','NEC1','NI2','NI3','NM2','NMO2','NMO3','NMO4','NO3','NO4','NP1','NV1','NV2','OC2','OC4','OC5','V25P1','V39P1','V70P2')
AND tar_id_rang >= 193
GROUP BY gta_nom_groupe_taxonomique

UNION

SELECT count(distinct(a.tao_id_taxon)) as tao_id_taxon,gta_nom_groupe_taxonomique

FROM param_table a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref
LEFT JOIN t_taxref_reglementation d ON c.tae_cd_protection = d.tae_cd_protection
JOIN t_taxon_observe e ON a.tao_id_taxon = e.tao_id_taxon
JOIN tr_groupe_taxonomique f ON e.gta_id_groupe_taxonomique = f.gta_id_groupe_taxonomique


WHERE gez_id_geom_zonage in ListeIdZonage
AND c.tae_cd_protection IN('RV43','RV26')
AND tar_id_rang >= 193
GROUP BY gta_nom_groupe_taxonomique

) t GROUP BY gta_nom_groupe_taxonomique


UNION ALL


-- nombre d’espèces Directive avec groupe taxonomique pour la commune choisie
--total
SELECT 'Directives' as rowname, count(distinct(tao_id_taxon)), 'total' as gta_nom_groupe_taxonomique
FROM param_table a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref
LEFT JOIN t_taxref_reglementation d ON c.tae_cd_protection = d.tae_cd_protection
WHERE gez_id_geom_zonage in ListeIdZonage
AND c.tae_cd_protection IN('CDH2','CDH4','CDH5','CDO1','CDO21','CDO22','CDO31','CDO32')

UNION ALL

SELECT 'Directives' as rowname, count(distinct(a.tao_id_taxon)), gta_nom_groupe_taxonomique
FROM param_table a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref
LEFT JOIN t_taxref_reglementation d ON c.tae_cd_protection = d.tae_cd_protection
JOIN t_taxon_observe e ON a.tao_id_taxon = e.tao_id_taxon
JOIN tr_groupe_taxonomique f ON e.gta_id_groupe_taxonomique = f.gta_id_groupe_taxonomique

WHERE gez_id_geom_zonage in ListeIdZonage
AND c.tae_cd_protection IN('CDH2','CDH4','CDH5','CDO1','CDO21','CDO22','CDO31','CDO32')
GROUP BY gta_nom_groupe_taxonomique

UNION ALL

-- nombre total taxons
--total
SELECT 'total taxons' as rowname, count(distinct(tv.tao_id_taxon)), 'total' as gta_nom_groupe_taxonomique
FROM param_table tv
INNER JOIN t_taxon_observe t ON tv.tao_id_taxon = t.tao_id_taxon 
AND gez_id_geom_zonage in ListeIdZonage

UNION ALL

SELECT 'total taxons' as rowname, COUNT(distinct(tv.tao_id_taxon)) AS nb_especes_directive, gta_nom_groupe_taxonomique 
FROM param_table tv
INNER JOIN t_taxon_observe t ON tv.tao_id_taxon = t.tao_id_taxon 
INNER JOIN tr_groupe_taxonomique tr ON t.gta_id_groupe_taxonomique = tr.gta_id_groupe_taxonomique
WHERE gez_id_geom_zonage in ListeIdZonage
GROUP BY gta_nom_groupe_taxonomique
]]></xml-property>
            <xml-property name="designerValues"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<model:DesignValues xmlns:design="http://www.eclipse.org/datatools/connectivity/oda/design" xmlns:model="http://www.eclipse.org/birt/report/model/adapter/odaModel">
  <Version>2.0</Version>
  <design:ResultSets derivedMetaData="true">
    <design:resultSetDefinitions>
      <design:resultSetColumns>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>rowname</design:name>
              <design:position>1</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>2147483647</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>rowname</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>rowname</design:label>
            <design:formattingHints>
              <design:displaySize>2147483647</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>count</design:name>
              <design:position>2</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>-5</design:nativeDataTypeCode>
            <design:precision>19</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>count</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>count</design:label>
            <design:formattingHints>
              <design:displaySize>20</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>gta_nom_groupe_taxonomique</design:name>
              <design:position>3</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>2147483647</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>gta_nom_groupe_taxonomique</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>gta_nom_groupe_taxonomique</design:label>
            <design:formattingHints>
              <design:displaySize>2147483647</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
      </design:resultSetColumns>
      <design:criteria/>
    </design:resultSetDefinitions>
  </design:ResultSets>
</model:DesignValues>]]></xml-property>
        </oda-data-set>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="EBZR_Synth_BilanMenacePerso" id="1995">
            <property name="nullsOrdering">nulls lowest</property>
            <list-property name="columnHints"/>
            <list-property name="parameters"/>
            <structure name="cachedMetaData"/>
            <method name="beforeOpen"><![CDATA[this.queryText=this.queryText.replaceAll('ListeIdObs', reportContext.getPageVariable("ListeIdObs"));


//region B FC ou entre les deux ?
var region=params["region"];

if (region=="B" )
{
  	this.queryText=this.queryText.replaceAll('region', 66);
}
else if(region=="FC" )
{
	this.queryText=this.queryText.replaceAll('region', 33);
}
else
{
	this.queryText=this.queryText.replaceAll('region', 0);
}]]></method>
            <property name="dataSource">Sigogne3</property>
            <list-property name="resultSet"/>
            <xml-property name="queryText"><![CDATA[-- nombre des taxons menacés et quasi menacés avec groupe taxonomique pour la commune choisie
--total
SELECT 'menace' as rowname, count(distinct(tao_id_taxon)), 'total' as gta_nom_groupe_taxonomique
FROM (
SELECT
a.tao_id_taxon,
max(b.sta_nom_statut) AS max_statut_uicn,
Max(d.indice_menace) as indice_menace_max,
max(gta_nom_groupe_taxonomique) as gta_nom_groupe_taxonomique,
1 as ordre
FROM t_taxon_observe a
 
JOIN tj_taxon_a_statut f ON a.tao_id_taxon = f.tao_id_taxon
LEFT OUTER JOIN tr_statut b ON f.sta_id_statut = b.sta_id_statut AND ( b.tst_id_type_statut = region OR b.tst_id_type_statut = 23)
JOIN t_observation_taxon c ON a.tao_id_taxon = c.tao_id_taxon
LEFT JOIN zz_qualif_menace d ON b.sta_nom_statut ilike d.sta_nom_statut
JOIN tr_groupe_taxonomique e ON a.gta_id_groupe_taxonomique = e.gta_id_groupe_taxonomique

WHERE c.ota_id_obs_taxon IN ListeIdObs

GROUP BY a.tao_id_taxon
HAVING MAX(indice_menace) > 5 ) f


UNION ALL


SELECT --MAX(indice_menace) as menace_max,tao_id_taxon,
'menace' as rowname,count(distinct(tao_id_taxon)) as count,gta_nom_groupe_taxonomique
FROM (

SELECT
a.tao_id_taxon,
max(b.sta_nom_statut) AS max_statut_uicn,
Max(d.indice_menace) as indice_menace_max,
	max(gta_nom_groupe_taxonomique) as gta_nom_groupe_taxonomique,
2 as ordre
FROM t_taxon_observe a
 
JOIN tj_taxon_a_statut f ON a.tao_id_taxon = f.tao_id_taxon
LEFT OUTER JOIN tr_statut b ON f.sta_id_statut = b.sta_id_statut AND ( b.tst_id_type_statut = region OR b.tst_id_type_statut = 23)
JOIN t_observation_taxon c ON a.tao_id_taxon = c.tao_id_taxon
LEFT JOIN zz_qualif_menace d ON b.sta_nom_statut ilike d.sta_nom_statut
JOIN tr_groupe_taxonomique e ON a.gta_id_groupe_taxonomique = e.gta_id_groupe_taxonomique
WHERE c.ota_id_obs_taxon IN ListeIdObs


GROUP BY a.tao_id_taxon,gta_nom_groupe_taxonomique,ordre
HAVING MAX(indice_menace) > 5  ) f
group by gta_nom_groupe_taxonomique


UNION ALL


-- nombre des taxons protégés au niveau national et régional avec groupe taxonomique pour la commune choisie
--total
SELECT 'protection' as rowname,sum(tao_id_taxon) as nb_especes_protegees,'total' as gta_nom_groupe_taxonomique

FROM (

SELECT count(distinct(a.tao_id_taxon)) as tao_id_taxon

FROM t_observation_taxon a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref

WHERE a.ota_id_obs_taxon IN ListeIdObs
AND c.tae_cd_protection IN('IBOAC','IBOAE','IBOAS','IBOAW','IBOC','IBOEU','IBO1','CD01') 
AND tar_id_rang >= 193
UNION

SELECT count(distinct(a.tao_id_taxon)) as tao_id_taxon

FROM t_observation_taxon a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref

WHERE a.ota_id_obs_taxon IN ListeIdObs
AND c.tae_cd_protection IN('cricetus_1','E70P2','gypaete1','NAR2','NAR3','NAR4','NAR5','NAR6','NEC1','NI2','NI3','NM2','NMO2','NMO3','NMO4','NO3','NO4','NP1','NV1','NV2','OC2','OC4','OC5','V25P1','V39P1','V70P2')
AND tar_id_rang >= 193
UNION

SELECT count(distinct(a.tao_id_taxon)) as tao_id_taxon

FROM t_observation_taxon a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref

WHERE a.ota_id_obs_taxon IN ListeIdObs
AND c.tae_cd_protection in ('RV43','RV26')
AND tar_id_rang >= 193

) t

UNION ALL

--par groupe

SELECT 'protection' as rowname,sum(tao_id_taxon) as nb_especes_protegees, gta_nom_groupe_taxonomique

FROM(

SELECT count(distinct(a.tao_id_taxon)) as tao_id_taxon,gta_nom_groupe_taxonomique
FROM t_observation_taxon a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref
LEFT JOIN t_taxref_reglementation d ON c.tae_cd_protection = d.tae_cd_protection
JOIN t_taxon_observe e ON a.tao_id_taxon = e.tao_id_taxon
JOIN tr_groupe_taxonomique f ON e.gta_id_groupe_taxonomique = f.gta_id_groupe_taxonomique

WHERE a.ota_id_obs_taxon IN ListeIdObs
AND c.tae_cd_protection IN('IBOAC','IBOAE','IBOAS','IBOAW','IBOC','IBOEU','IBO1','CD01')
AND tar_id_rang >= 193
GROUP BY gta_nom_groupe_taxonomique

UNION

SELECT count(distinct(a.tao_id_taxon)) as tao_id_taxon,gta_nom_groupe_taxonomique

FROM t_observation_taxon a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref
LEFT JOIN t_taxref_reglementation d ON c.tae_cd_protection = d.tae_cd_protection
JOIN t_taxon_observe e ON a.tao_id_taxon = e.tao_id_taxon
JOIN tr_groupe_taxonomique f ON e.gta_id_groupe_taxonomique = f.gta_id_groupe_taxonomique

WHERE a.ota_id_obs_taxon IN ListeIdObs
AND c.tae_cd_protection IN('cricetus_1','E70P2','gypaete1','NAR2','NAR3','NAR4','NAR5','NAR6','NEC1','NI2','NI3','NM2','NMO2','NMO3','NMO4','NO3','NO4','NP1','NV1','NV2','OC2','OC4','OC5','V25P1','V39P1','V70P2')
AND tar_id_rang >= 193
GROUP BY gta_nom_groupe_taxonomique

UNION

SELECT count(distinct(a.tao_id_taxon)) as tao_id_taxon,gta_nom_groupe_taxonomique
FROM t_observation_taxon a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref
LEFT JOIN t_taxref_reglementation d ON c.tae_cd_protection = d.tae_cd_protection
JOIN t_taxon_observe e ON a.tao_id_taxon = e.tao_id_taxon
JOIN tr_groupe_taxonomique f ON e.gta_id_groupe_taxonomique = f.gta_id_groupe_taxonomique

WHERE a.ota_id_obs_taxon IN ListeIdObs

AND c.tae_cd_protection IN('RV43','RV26')
AND tar_id_rang >= 193
GROUP BY gta_nom_groupe_taxonomique) t GROUP BY gta_nom_groupe_taxonomique

UNION ALL

-- nombre d’espèces Directive avec groupe taxonomique pour la commune choisie
--total

SELECT 'Directives' as rowname, count(distinct(tao_id_taxon)), 'total' as gta_nom_groupe_taxonomique
FROM  t_observation_taxon tv
JOIN t_taxref b on tv.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref
LEFT JOIN t_taxref_reglementation d ON c.tae_cd_protection = d.tae_cd_protection
WHERE c.tae_cd_protection IN('CDH2','CDH4','CDH5','CDO1','CDO21','CDO22','CDO31','CDO32')
AND tv.ota_id_obs_taxon IN ListeIdObs

UNION ALL

SELECT 'Directives' as rowname, count(distinct(tv.tao_id_taxon)), gta_nom_groupe_taxonomique
FROM  t_observation_taxon tv
JOIN t_taxref b on tv.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref
LEFT JOIN t_taxref_reglementation d ON c.tae_cd_protection = d.tae_cd_protection
JOIN t_taxon_observe e ON tv.tao_id_taxon = e.tao_id_taxon
JOIN tr_groupe_taxonomique f ON e.gta_id_groupe_taxonomique = f.gta_id_groupe_taxonomique

WHERE c.tae_cd_protection IN('CDH2','CDH4','CDH5','CDO1','CDO21','CDO22','CDO31','CDO32')
AND tv.ota_id_obs_taxon IN ListeIdObs
GROUP BY gta_nom_groupe_taxonomique

UNION ALL

-- nombre total taxons
--total
SELECT 'total taxons' as rowname, count(distinct(tv.tao_id_taxon)), 'total' as gta_nom_groupe_taxonomique
FROM t_observation_taxon tv
INNER JOIN t_taxon_observe t ON tv.tao_id_taxon = t.tao_id_taxon 
AND tv.ota_id_obs_taxon IN ListeIdObs

UNION ALL

SELECT 'total taxons' as rowname, COUNT(distinct(tv.tao_id_taxon)) AS nb_especes_directive, gta_nom_groupe_taxonomique 
FROM t_observation_taxon tv
INNER JOIN t_taxon_observe t ON tv.tao_id_taxon = t.tao_id_taxon 
INNER JOIN tr_groupe_taxonomique tr ON t.gta_id_groupe_taxonomique = tr.gta_id_groupe_taxonomique
WHERE tv.ota_id_obs_taxon IN ListeIdObs
GROUP BY gta_nom_groupe_taxonomique
]]></xml-property>
            <xml-property name="designerValues"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<model:DesignValues xmlns:design="http://www.eclipse.org/datatools/connectivity/oda/design" xmlns:model="http://www.eclipse.org/birt/report/model/adapter/odaModel">
  <Version>2.0</Version>
  <design:ResultSets derivedMetaData="true">
    <design:resultSetDefinitions>
      <design:resultSetColumns>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>rowname</design:name>
              <design:position>1</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>2147483647</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>rowname</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>rowname</design:label>
            <design:formattingHints>
              <design:displaySize>2147483647</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>count</design:name>
              <design:position>2</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>-5</design:nativeDataTypeCode>
            <design:precision>19</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>count</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>count</design:label>
            <design:formattingHints>
              <design:displaySize>20</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>gta_nom_groupe_taxonomique</design:name>
              <design:position>3</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>2147483647</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>gta_nom_groupe_taxonomique</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>gta_nom_groupe_taxonomique</design:label>
            <design:formattingHints>
              <design:displaySize>2147483647</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
      </design:resultSetColumns>
      <design:criteria/>
    </design:resultSetDefinitions>
  </design:ResultSets>
</model:DesignValues>]]></xml-property>
        </oda-data-set>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="EBZR_Synth_Menace" id="720">
            <list-property name="columnHints"/>
            <list-property name="parameters">
                <structure>
                    <property name="name">param_1</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">1</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_2</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">2</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_3</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">3</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
            </list-property>
            <structure name="cachedMetaData"/>
            <method name="beforeOpen"><![CDATA[this.queryText=this.queryText.replaceAll('param_table', params["Nom_Table"]);
this.queryText=this.queryText.replaceAll('ListeIdZonage', reportContext.getPageVariable("ListeIdZonage"));

//region B FC ou entre les deux ?
var region=params["region"];

if (region=="B" )
{
  	this.queryText=this.queryText.replaceAll('region', 66);
}
else if(region=="FC" )
{
	this.queryText=this.queryText.replaceAll('region', 33);
}
else
{
	this.queryText=this.queryText.replaceAll('region', 0);
}]]></method>
            <property name="dataSource">Sigogne3</property>
            <list-property name="resultSet"/>
            <xml-property name="queryText"><![CDATA[SELECT --MAX(indice_menace) as menace_max,tao_id_taxon,
count(distinct(tao_id_taxon)) as total, 'Espèces menacées' as type_menace
FROM (

SELECT
a.tao_id_taxon,
max(b.sta_nom_statut) AS max_statut_uicn,
Max(d.indice_menace) as indice_menace_max

FROM t_taxon_observe a
 
JOIN tj_taxon_a_statut f ON a.tao_id_taxon = f.tao_id_taxon
LEFT OUTER JOIN tr_statut b ON f.sta_id_statut = b.sta_id_statut AND ( b.tst_id_type_statut = region OR b.tst_id_type_statut = 23)
JOIN param_table c ON a.tao_id_taxon = c.tao_id_taxon
LEFT JOIN zz_qualif_menace d ON b.sta_nom_statut ilike d.sta_nom_statut

WHERE gez_id_geom_zonage in ListeIdZonage


GROUP BY a.tao_id_taxon
HAVING MAX(indice_menace) > 5 ) f

UNION

SELECT --MAX(indice_menace) as menace_max,tao_id_taxon,
count(distinct(tao_id_taxon)) as total, 'Espèces quasi menacées et à données insuffisantes' as type_menace
FROM (

SELECT
a.tao_id_taxon,
max(b.sta_nom_statut) AS max_statut_uicn,
Max(d.indice_menace) as indice_menace_max

FROM t_taxon_observe a
 
JOIN tj_taxon_a_statut f ON a.tao_id_taxon = f.tao_id_taxon
LEFT OUTER JOIN tr_statut b ON f.sta_id_statut = b.sta_id_statut AND ( b.tst_id_type_statut = region OR b.tst_id_type_statut = 23)
JOIN param_table c ON a.tao_id_taxon = c.tao_id_taxon
LEFT JOIN zz_qualif_menace d ON b.sta_nom_statut ilike d.sta_nom_statut

WHERE gez_id_geom_zonage in ListeIdZonage


GROUP BY a.tao_id_taxon
HAVING MAX(indice_menace) >= 4 AND MAX(indice_menace) <= 5 ) f --nt et dd 

UNION

SELECT --MAX(indice_menace) as menace_max,tao_id_taxon,
count(distinct(tao_id_taxon)) as total, 'Espèces à préoccupation mineure et espèces non évaluées' as type_menace
FROM (

SELECT
a.tao_id_taxon,
max(b.sta_nom_statut) AS max_statut_uicn,
Max(d.indice_menace) as indice_menace_max

FROM t_taxon_observe a
 
JOIN tj_taxon_a_statut f ON a.tao_id_taxon = f.tao_id_taxon
LEFT OUTER JOIN tr_statut b ON f.sta_id_statut = b.sta_id_statut AND ( b.tst_id_type_statut = region OR b.tst_id_type_statut = 23)
JOIN param_table c ON a.tao_id_taxon = c.tao_id_taxon
LEFT JOIN zz_qualif_menace d ON b.sta_nom_statut ilike d.sta_nom_statut

WHERE gez_id_geom_zonage in ListeIdZonage


GROUP BY a.tao_id_taxon
HAVING MAX(indice_menace) =3
) f]]></xml-property>
            <xml-property name="designerValues"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<model:DesignValues xmlns:design="http://www.eclipse.org/datatools/connectivity/oda/design" xmlns:model="http://www.eclipse.org/birt/report/model/adapter/odaModel">
  <Version>2.0</Version>
  <design:ResultSets derivedMetaData="true">
    <design:resultSetDefinitions>
      <design:resultSetColumns>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>type_menace</design:name>
              <design:position>1</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>0</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>type_menace</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>type_menace</design:label>
            <design:formattingHints>
              <design:displaySize>2147483647</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>nb</design:name>
              <design:position>2</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>-5</design:nativeDataTypeCode>
            <design:precision>19</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>nb</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>nb</design:label>
            <design:formattingHints>
              <design:displaySize>20</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
      </design:resultSetColumns>
      <design:criteria/>
    </design:resultSetDefinitions>
  </design:ResultSets>
</model:DesignValues>]]></xml-property>
        </oda-data-set>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="EBZR_Synth_MenacePerso" id="1993">
            <list-property name="columnHints"/>
            <list-property name="parameters"/>
            <structure name="cachedMetaData"/>
            <method name="beforeOpen"><![CDATA[this.queryText=this.queryText.replaceAll('ListeIdObs', reportContext.getPageVariable("ListeIdObs"));


//region B FC ou entre les deux ?
var region=params["region"];

if (region=="B" )
{
  	this.queryText=this.queryText.replaceAll('region', 66);
}
else if(region=="FC" )
{
	this.queryText=this.queryText.replaceAll('region', 33);
}
else
{
	this.queryText=this.queryText.replaceAll('region', 0);
}]]></method>
            <property name="dataSource">Sigogne3</property>
            <list-property name="resultSet"/>
            <xml-property name="queryText"><![CDATA[SELECT --MAX(indice_menace) as menace_max,tao_id_taxon,
count(distinct(tao_id_taxon)) as total, 'Espèces menacées' as type_menace
FROM (

SELECT
a.tao_id_taxon,
max(b.sta_nom_statut) AS max_statut_uicn,
Max(d.indice_menace) as indice_menace_max

FROM t_taxon_observe a
 
JOIN tj_taxon_a_statut f ON a.tao_id_taxon = f.tao_id_taxon
LEFT OUTER JOIN tr_statut b ON f.sta_id_statut = b.sta_id_statut AND ( b.tst_id_type_statut = region OR b.tst_id_type_statut = 23)
JOIN t_observation_taxon c ON a.tao_id_taxon = c.tao_id_taxon
LEFT JOIN zz_qualif_menace d ON b.sta_nom_statut ilike d.sta_nom_statut

WHERE c.ota_id_obs_taxon in ListeIdObs


GROUP BY a.tao_id_taxon
HAVING MAX(indice_menace) > 5 ) f

UNION

SELECT --MAX(indice_menace) as menace_max,tao_id_taxon,
count(distinct(tao_id_taxon)) as total, 'Espèces quasi menacées et à données insuffisantes' as type_menace
FROM (

SELECT
a.tao_id_taxon,
max(b.sta_nom_statut) AS max_statut_uicn,
Max(d.indice_menace) as indice_menace_max

FROM t_taxon_observe a
 
JOIN tj_taxon_a_statut f ON a.tao_id_taxon = f.tao_id_taxon
LEFT OUTER JOIN tr_statut b ON f.sta_id_statut = b.sta_id_statut AND ( b.tst_id_type_statut = region OR b.tst_id_type_statut = 23)
JOIN t_observation_taxon c ON a.tao_id_taxon = c.tao_id_taxon
LEFT JOIN zz_qualif_menace d ON b.sta_nom_statut ilike d.sta_nom_statut

WHERE c.ota_id_obs_taxon in ListeIdObs


GROUP BY a.tao_id_taxon
HAVING MAX(indice_menace) >= 4 AND MAX(indice_menace) <= 5 ) f --nt et dd 

UNION

SELECT --MAX(indice_menace) as menace_max,tao_id_taxon,
count(distinct(tao_id_taxon)) as total, 'Espèces à préoccupation mineure et espèces non évaluées' as type_menace
FROM (

SELECT
a.tao_id_taxon,
max(b.sta_nom_statut) AS max_statut_uicn,
Max(d.indice_menace) as indice_menace_max

FROM t_taxon_observe a
 
JOIN tj_taxon_a_statut f ON a.tao_id_taxon = f.tao_id_taxon
LEFT OUTER JOIN tr_statut b ON f.sta_id_statut = b.sta_id_statut AND ( b.tst_id_type_statut = region OR b.tst_id_type_statut = 23)
JOIN t_observation_taxon c ON a.tao_id_taxon = c.tao_id_taxon
LEFT JOIN zz_qualif_menace d ON b.sta_nom_statut ilike d.sta_nom_statut

WHERE c.ota_id_obs_taxon in ListeIdObs


GROUP BY a.tao_id_taxon
HAVING MAX(indice_menace) =3
) f

]]></xml-property>
            <xml-property name="designerValues"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<model:DesignValues xmlns:design="http://www.eclipse.org/datatools/connectivity/oda/design" xmlns:model="http://www.eclipse.org/birt/report/model/adapter/odaModel">
  <Version>2.0</Version>
  <design:ResultSets derivedMetaData="true">
    <design:resultSetDefinitions>
      <design:resultSetColumns>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>type_menace</design:name>
              <design:position>1</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>0</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>type_menace</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>type_menace</design:label>
            <design:formattingHints>
              <design:displaySize>2147483647</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>nb</design:name>
              <design:position>2</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>-5</design:nativeDataTypeCode>
            <design:precision>19</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>nb</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>nb</design:label>
            <design:formattingHints>
              <design:displaySize>20</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
      </design:resultSetColumns>
      <design:criteria/>
    </design:resultSetDefinitions>
  </design:ResultSets>
</model:DesignValues>]]></xml-property>
        </oda-data-set>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="EBZR_Synth_Protection" id="722">
            <list-property name="columnHints"/>
            <list-property name="parameters">
                <structure>
                    <property name="name">param_1</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">1</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
            </list-property>
            <structure name="cachedMetaData"/>
            <method name="beforeOpen"><![CDATA[this.queryText=this.queryText.replaceAll('param_table', params["Nom_Table"]);
this.queryText=this.queryText.replaceAll('ListeIdZonage', reportContext.getPageVariable("ListeIdZonage"));]]></method>
            <property name="dataSource">Sigogne3</property>
            <list-property name="resultSet"/>
            <xml-property name="queryText"><![CDATA[SELECT * from (
SELECT count(distinct(a.tao_id_taxon))

,( CASE WHEN c.tae_cd_protection IN( 
'cricetus_1'
,'E70P2'
,'gypaete1'
,'NAR2'
,'NAR3'
,'NAR4'
,'NAR5'
,'NAR6'
,'NEC1'
,'NI2'
,'NI3'
,'NM2'
,'NMO2'
,'NMO3'
,'NMO4'
,'NO3'
,'NO4'
,'NP1'
,'NV1'
,'NV2'
,'OC2'
,'OC4'
,'OC5'
,'V25P1'
,'V39P1'
,'V70P2') THEN 'Protection nationale' 
WHEN c.tae_cd_protection In('IBOAC','IBOAE','IBOAS','IBOAW','IBOC','IBOEU','IBO1','CD01') THEN 'Protection internationale'
WHEN c.tae_cd_protection = 'RV43' OR c.tae_cd_protection = 'RV26'  THEN 'Protection régionale' 
WHEN c.tae_cd_protection is null THEN ( 'Pas de protection et pas de réglementation' ) 
ELSE ('z') END ) AS type_protection


FROM param_table a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref AND b.tax_cd_nom = b.tax_cd_ref

WHERE gez_id_geom_zonage in ListeIdZonage AND tar_id_rang >= 193
GROUP BY type_protection
) as query where type_protection !='z'-- on enlève les réglementations doublons

]]></xml-property>
            <xml-property name="designerValues"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<model:DesignValues xmlns:design="http://www.eclipse.org/datatools/connectivity/oda/design" xmlns:model="http://www.eclipse.org/birt/report/model/adapter/odaModel">
  <Version>2.0</Version>
  <design:ResultSets derivedMetaData="true">
    <design:resultSetDefinitions>
      <design:resultSetColumns>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>type_protection</design:name>
              <design:position>1</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>0</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>type_protection</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>type_protection</design:label>
            <design:formattingHints>
              <design:displaySize>2147483647</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>count</design:name>
              <design:position>2</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>-5</design:nativeDataTypeCode>
            <design:precision>19</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>count</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>count</design:label>
            <design:formattingHints>
              <design:displaySize>20</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
      </design:resultSetColumns>
      <design:criteria/>
    </design:resultSetDefinitions>
  </design:ResultSets>
</model:DesignValues>]]></xml-property>
        </oda-data-set>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="EBZR_Synth_ProtectionPerso" id="1994">
            <list-property name="columnHints"/>
            <list-property name="parameters"/>
            <structure name="cachedMetaData"/>
            <method name="beforeOpen"><![CDATA[this.queryText=this.queryText.replaceAll('ListeIdObs', reportContext.getPageVariable("ListeIdObs"));]]></method>
            <property name="dataSource">Sigogne3</property>
            <list-property name="resultSet"/>
            <xml-property name="queryText"><![CDATA[SELECT * from (
SELECT count(distinct(a.tao_id_taxon))

,( CASE WHEN c.tae_cd_protection IN( 
'cricetus_1'
,'E70P2'
,'gypaete1'
,'NAR2'
,'NAR3'
,'NAR4'
,'NAR5'
,'NAR6'
,'NEC1'
,'NI2'
,'NI3'
,'NM2'
,'NMO2'
,'NMO3'
,'NMO4'
,'NO3'
,'NO4'
,'NP1'
,'NV1'
,'NV2'
,'OC2'
,'OC4'
,'OC5'
,'V25P1'
,'V39P1'
,'V70P2') THEN 'Protection nationale' 
WHEN c.tae_cd_protection In('IBOAC','IBOAE','IBOAS','IBOAW','IBOC','IBOEU','IBO1','CD01') THEN 'Protection internationale'
WHEN c.tae_cd_protection = 'RV43' OR c.tae_cd_protection = 'RV26'  THEN 'Protection régionale' 
WHEN c.tae_cd_protection is null THEN ( 'Pas de protection et pas de réglementation' ) 
ELSE ('z') END ) AS type_protection


FROM t_observation_taxon a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref AND b.tax_cd_nom = b.tax_cd_ref

WHERE ota_id_obs_taxon in ListeIdObs AND tar_id_rang >= 193
GROUP BY type_protection
) as query where type_protection !='z'-- on enlève les réglementations doublons

]]></xml-property>
            <xml-property name="designerValues"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<model:DesignValues xmlns:design="http://www.eclipse.org/datatools/connectivity/oda/design" xmlns:model="http://www.eclipse.org/birt/report/model/adapter/odaModel">
  <Version>2.0</Version>
  <design:ResultSets derivedMetaData="true">
    <design:resultSetDefinitions>
      <design:resultSetColumns>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>type_protection</design:name>
              <design:position>1</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>0</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>type_protection</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>type_protection</design:label>
            <design:formattingHints>
              <design:displaySize>2147483647</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>count</design:name>
              <design:position>2</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>-5</design:nativeDataTypeCode>
            <design:precision>19</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>count</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>count</design:label>
            <design:formattingHints>
              <design:displaySize>20</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
      </design:resultSetColumns>
      <design:criteria/>
    </design:resultSetDefinitions>
  </design:ResultSets>
</model:DesignValues>]]></xml-property>
        </oda-data-set>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="EBZR_Synth_TotalMenace" id="751">
            <list-property name="columnHints"/>
            <list-property name="parameters">
                <structure>
                    <property name="name">param_1</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">1</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_2</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">2</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
            </list-property>
            <structure name="cachedMetaData"/>
            <method name="beforeOpen"><![CDATA[this.queryText=this.queryText.replaceAll('param_table', params["Nom_Table"]);
this.queryText=this.queryText.replaceAll('ListeIdZonage', reportContext.getPageVariable("ListeIdZonage"));

//region B FC ou entre les deux ?
var region=params["region"];

if (region=="B" )
{
  	this.queryText=this.queryText.replaceAll('region', 66);
}
else if(region=="FC" )
{
	this.queryText=this.queryText.replaceAll('region', 33);
}
else
{
	this.queryText=this.queryText.replaceAll('region', 0);
}]]></method>
            <property name="dataSource">Sigogne3</property>
            <list-property name="resultSet"/>
            <xml-property name="queryText"><![CDATA[SELECT --MAX(indice_menace) as menace_max,tao_id_taxon,
count(distinct(tao_id_taxon)) as total, 'Espèces évaluées' as type_menace
FROM (
SELECT
c.tao_id_taxon,
max(b.sta_nom_statut) AS max_statut_uicn,
Max(d.indice_menace) as indice_menace_max,
tax_nom_vern

FROM t_taxon_observe a
JOIN t_taxref zz ON a.tao_id_taxon = zz.tax_id_taxref
 
JOIN tj_taxon_a_statut f ON a.tao_id_taxon = f.tao_id_taxon
LEFT OUTER JOIN tr_statut b ON f.sta_id_statut = b.sta_id_statut AND ( b.tst_id_type_statut = region OR b.tst_id_type_statut = 23)
JOIN param_table c ON a.tao_id_taxon = c.tao_id_taxon

LEFT JOIN zz_qualif_menace d ON b.sta_nom_statut ilike d.sta_nom_statut
WHERE gez_id_geom_zonage in ListeIdZonage


GROUP BY a.tao_id_taxon,tax_nom_vern,c.tao_id_taxon
HAVING MAX(indice_menace) >=3
order by tax_nom_vern) f]]></xml-property>
            <xml-property name="designerValues"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<model:DesignValues xmlns:design="http://www.eclipse.org/datatools/connectivity/oda/design" xmlns:model="http://www.eclipse.org/birt/report/model/adapter/odaModel">
  <Version>2.0</Version>
  <design:ResultSets derivedMetaData="true">
    <design:resultSetDefinitions>
      <design:resultSetColumns>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>total</design:name>
              <design:position>1</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>-5</design:nativeDataTypeCode>
            <design:precision>19</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>total</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>total</design:label>
            <design:formattingHints>
              <design:displaySize>20</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>type_menace</design:name>
              <design:position>2</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>0</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>type_menace</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>type_menace</design:label>
            <design:formattingHints>
              <design:displaySize>2147483647</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
      </design:resultSetColumns>
      <design:criteria/>
    </design:resultSetDefinitions>
  </design:ResultSets>
</model:DesignValues>]]></xml-property>
        </oda-data-set>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="EBZR_Synth_TotalMenacePerso" id="1997">
            <list-property name="columnHints"/>
            <list-property name="parameters"/>
            <structure name="cachedMetaData"/>
            <method name="beforeOpen"><![CDATA[this.queryText=this.queryText.replaceAll('ListeIdObs', reportContext.getPageVariable("ListeIdObs"));

//region B FC ou entre les deux ?
var region=params["region"];

if (region=="B" )
{
  	this.queryText=this.queryText.replaceAll('region', 66);
}
else if(region=="FC" )
{
	this.queryText=this.queryText.replaceAll('region', 33);
}
else
{
	this.queryText=this.queryText.replaceAll('region', 0);
}]]></method>
            <property name="dataSource">Sigogne3</property>
            <list-property name="resultSet"/>
            <xml-property name="queryText"><![CDATA[SELECT --MAX(indice_menace) as menace_max,tao_id_taxon,
count(distinct(tao_id_taxon)) as total, 'Espèces évaluées' as type_menace
FROM (
SELECT
c.tao_id_taxon,
max(b.sta_nom_statut) AS max_statut_uicn,
Max(d.indice_menace) as indice_menace_max,
tax_nom_vern

FROM t_taxon_observe a
JOIN t_taxref zz ON a.tao_id_taxon = zz.tax_id_taxref
 
JOIN tj_taxon_a_statut f ON a.tao_id_taxon = f.tao_id_taxon
LEFT OUTER JOIN tr_statut b ON f.sta_id_statut = b.sta_id_statut AND ( b.tst_id_type_statut = region OR b.tst_id_type_statut = 23)
JOIN t_observation_taxon c ON a.tao_id_taxon = c.tao_id_taxon

LEFT JOIN zz_qualif_menace d ON b.sta_nom_statut ilike d.sta_nom_statut
WHERE c.ota_id_obs_taxon in ListeIdObs


GROUP BY a.tao_id_taxon,tax_nom_vern,c.tao_id_taxon
HAVING MAX(indice_menace) >=3
order by tax_nom_vern) f]]></xml-property>
            <xml-property name="designerValues"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<model:DesignValues xmlns:design="http://www.eclipse.org/datatools/connectivity/oda/design" xmlns:model="http://www.eclipse.org/birt/report/model/adapter/odaModel">
  <Version>2.0</Version>
  <design:ResultSets derivedMetaData="true">
    <design:resultSetDefinitions>
      <design:resultSetColumns>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>total</design:name>
              <design:position>1</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>-5</design:nativeDataTypeCode>
            <design:precision>19</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>total</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>total</design:label>
            <design:formattingHints>
              <design:displaySize>20</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>type_menace</design:name>
              <design:position>2</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>0</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>type_menace</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>type_menace</design:label>
            <design:formattingHints>
              <design:displaySize>2147483647</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
      </design:resultSetColumns>
      <design:criteria/>
    </design:resultSetDefinitions>
  </design:ResultSets>
</model:DesignValues>]]></xml-property>
        </oda-data-set>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="EBZR_Synth_TotalMenaceEchelon" id="1975">
            <list-property name="parameters">
                <structure>
                    <property name="name">param_1</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="dataType">integer</property>
                    <property name="position">1</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_2</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="dataType">integer</property>
                    <property name="position">2</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_3</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="dataType">integer</property>
                    <property name="position">3</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_4</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="dataType">integer</property>
                    <property name="position">4</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
            </list-property>
            <structure name="cachedMetaData">
                <list-property name="resultSet">
                    <structure>
                        <property name="position">1</property>
                        <property name="name">total</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">2</property>
                        <property name="name">type_menace</property>
                        <property name="dataType">string</property>
                    </structure>
                </list-property>
            </structure>
            <method name="beforeOpen"><![CDATA[this.queryText = this.queryText.replace("base_table", params["Nom_Table"]);
this.queryText = this.queryText.replace("base_geom", params["Nom_Table"].replace("tv_taxon_observe_", "tv_geom_zonages_"));
this.queryText = this.queryText.replace("echelon_table", params["Tbl_Echelon"]);
this.queryText = this.queryText.replace("echelon_geom", params["Tbl_Echelon"].replace("tv_taxon_observe_", "tv_geom_zonages_"));]]></method>
            <property name="dataSource">Sigogne3</property>
            <list-property name="resultSet">
                <structure>
                    <property name="position">1</property>
                    <property name="name">total</property>
                    <property name="nativeName">total</property>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="position">2</property>
                    <property name="name">type_menace</property>
                    <property name="nativeName">type_menace</property>
                    <property name="dataType">string</property>
                </structure>
            </list-property>
            <xml-property name="queryText"><![CDATA[SELECT --MAX(indice_menace) as menace_max,tao_id_taxon,
count(distinct(tao_id_taxon)) as total, 'Espèces évaluées' as type_menace
FROM (

SELECT
a.tao_id_taxon,
max(b.sta_nom_statut) AS max_statut_uicn,
d.indice_menace

FROM echelon_table a
 
JOIN tj_taxon_a_statut f ON a.tao_id_taxon = f.tao_id_taxon
LEFT OUTER JOIN tr_statut b ON f.sta_id_statut = b.sta_id_statut AND b.tst_id_type_statut = 33
LEFT JOIN zz_qualif_menace d ON b.sta_nom_statut ilike d.sta_nom_statut
--echelon
INNER JOIN echelon_geom geom_a ON a.gez_id_geom_zonage = geom_a.gez_id_geom_zonage
INNER JOIN base_geom geom_b ON ST_INTERSECTS(geom_a.gez_geometry, geom_b.gez_geometry)
--
WHERE geom_b.gez_id_geom_zonage = ?
AND (a.tao_id_taxon NOT IN (SELECT tao_id_taxon FROM base_table WHERE gez_id_geom_zonage = ?))


GROUP BY upper(b.sta_nom_statut),a.tao_id_taxon,d.indice_menace
HAVING MAX(indice_menace) >=3

UNION 

SELECT
a.tao_id_taxon,
max(b.sta_nom_statut) AS max_statut_uicn,
d.indice_menace

FROM echelon_table a
 
JOIN tj_taxon_a_statut f ON a.tao_id_taxon = f.tao_id_taxon
LEFT OUTER JOIN tr_statut b ON f.sta_id_statut = b.sta_id_statut AND b.tst_id_type_statut = 23
LEFT JOIN zz_qualif_menace d ON b.sta_nom_statut ilike d.sta_nom_statut
--echelon
INNER JOIN echelon_geom geom_a ON a.gez_id_geom_zonage = geom_a.gez_id_geom_zonage
INNER JOIN base_geom geom_b ON ST_INTERSECTS(geom_a.gez_geometry, geom_b.gez_geometry)
--
WHERE geom_b.gez_id_geom_zonage = ?
AND (a.tao_id_taxon NOT IN (SELECT tao_id_taxon FROM base_table WHERE gez_id_geom_zonage = ?))
GROUP BY upper(b.sta_nom_statut),a.tao_id_taxon,d.indice_menace
HAVING MAX(indice_menace) >=3
) f]]></xml-property>
            <xml-property name="designerValues"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<model:DesignValues xmlns:design="http://www.eclipse.org/datatools/connectivity/oda/design" xmlns:model="http://www.eclipse.org/birt/report/model/adapter/odaModel">
  <Version>2.0</Version>
  <design:ResultSets derivedMetaData="true">
    <design:resultSetDefinitions>
      <design:resultSetColumns>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>total</design:name>
              <design:position>1</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>-5</design:nativeDataTypeCode>
            <design:precision>19</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>total</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>total</design:label>
            <design:formattingHints>
              <design:displaySize>20</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>type_menace</design:name>
              <design:position>2</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>0</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>type_menace</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>type_menace</design:label>
            <design:formattingHints>
              <design:displaySize>2147483647</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
      </design:resultSetColumns>
      <design:criteria/>
    </design:resultSetDefinitions>
  </design:ResultSets>
</model:DesignValues>]]></xml-property>
        </oda-data-set>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="EBZR_Synth_MenaceEchelon" id="1971">
            <list-property name="parameters">
                <structure>
                    <property name="name">param_1</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="dataType">integer</property>
                    <property name="position">1</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_2</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="dataType">integer</property>
                    <property name="position">2</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_3</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="dataType">integer</property>
                    <property name="position">3</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_4</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="dataType">integer</property>
                    <property name="position">4</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_5</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="dataType">integer</property>
                    <property name="position">5</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_6</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="dataType">integer</property>
                    <property name="position">6</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
            </list-property>
            <structure name="cachedMetaData">
                <list-property name="resultSet">
                    <structure>
                        <property name="position">1</property>
                        <property name="name">total</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">2</property>
                        <property name="name">type_menace</property>
                        <property name="dataType">string</property>
                    </structure>
                </list-property>
            </structure>
            <method name="beforeOpen"><![CDATA[this.queryText = this.queryText.replace("base_table", params["Nom_Table"]);
this.queryText = this.queryText.replace("base_geom", params["Nom_Table"].replace("tv_taxon_observe_", "tv_geom_zonages_"));
this.queryText = this.queryText.replace("echelon_table", params["Tbl_Echelon"]);
this.queryText = this.queryText.replace("echelon_geom", params["Tbl_Echelon"].replace("tv_taxon_observe_", "tv_geom_zonages_"));]]></method>
            <property name="dataSource">Sigogne3</property>
            <list-property name="resultSet">
                <structure>
                    <property name="position">1</property>
                    <property name="name">total</property>
                    <property name="nativeName">total</property>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="position">2</property>
                    <property name="name">type_menace</property>
                    <property name="nativeName">type_menace</property>
                    <property name="dataType">string</property>
                </structure>
            </list-property>
            <xml-property name="queryText"><![CDATA[SELECT --MAX(indice_menace) as menace_max,tao_id_taxon,
count(distinct(f.tao_id_taxon)) as total, 'Espèces menacées' as type_menace
FROM (

SELECT
a.tao_id_taxon,
max(b.sta_nom_statut) AS max_statut_uicn,
d.indice_menace

FROM echelon_table a
 
JOIN tj_taxon_a_statut f ON a.tao_id_taxon = f.tao_id_taxon
LEFT OUTER JOIN tr_statut b ON f.sta_id_statut = b.sta_id_statut AND b.tst_id_type_statut = 33
LEFT JOIN zz_qualif_menace d ON b.sta_nom_statut ilike d.sta_nom_statut
--echelon
INNER JOIN echelon_geom geom_a ON a.gez_id_geom_zonage = geom_a.gez_id_geom_zonage
INNER JOIN base_geom geom_b ON ST_INTERSECTS(geom_a.gez_geometry, geom_b.gez_geometry)
--
WHERE geom_b.gez_id_geom_zonage = ?
AND (a.tao_id_taxon NOT IN (SELECT base_table.tao_id_taxon FROM base_table WHERE gez_id_geom_zonage = ?))

GROUP BY upper(b.sta_nom_statut),a.tao_id_taxon,d.indice_menace
HAVING MAX(indice_menace) > 5 ) f

UNION

SELECT --MAX(indice_menace) as menace_max,tao_id_taxon,
count(distinct(f.tao_id_taxon)) as total, 'espèces quasi menacées et à données insuffisantes' as type_menace
FROM (

SELECT
a.tao_id_taxon,
max(b.sta_nom_statut) AS max_statut_uicn,
d.indice_menace

FROM echelon_table a
 
JOIN tj_taxon_a_statut f ON a.tao_id_taxon = f.tao_id_taxon
LEFT OUTER JOIN tr_statut b ON f.sta_id_statut = b.sta_id_statut AND b.tst_id_type_statut = 33
LEFT JOIN zz_qualif_menace d ON b.sta_nom_statut ilike d.sta_nom_statut
--echelon
INNER JOIN echelon_geom geom_a ON a.gez_id_geom_zonage = geom_a.gez_id_geom_zonage
INNER JOIN base_geom geom_b ON ST_INTERSECTS(geom_a.gez_geometry, geom_b.gez_geometry)
--
WHERE geom_b.gez_id_geom_zonage = ?
AND (a.tao_id_taxon NOT IN (SELECT base_table.tao_id_taxon FROM base_table WHERE gez_id_geom_zonage = ?))

GROUP BY upper(b.sta_nom_statut),a.tao_id_taxon,d.indice_menace
HAVING MAX(indice_menace) >= 4 AND MAX(indice_menace) <= 5 ) f --nt et dd 

UNION

SELECT --MAX(indice_menace) as menace_max,tao_id_taxon,
count(distinct(f.tao_id_taxon)) as total, 'espèces à préoccupation mineure et espèces non évaluées' as type_menace
FROM (

SELECT
a.tao_id_taxon,
max(b.sta_nom_statut) AS max_statut_uicn,
d.indice_menace

FROM echelon_table a
 
JOIN tj_taxon_a_statut f ON a.tao_id_taxon = f.tao_id_taxon
LEFT OUTER JOIN tr_statut b ON f.sta_id_statut = b.sta_id_statut AND b.tst_id_type_statut = 33
LEFT JOIN zz_qualif_menace d ON b.sta_nom_statut ilike d.sta_nom_statut
--echelon
INNER JOIN echelon_geom geom_a ON a.gez_id_geom_zonage = geom_a.gez_id_geom_zonage
INNER JOIN base_geom geom_b ON ST_INTERSECTS(geom_a.gez_geometry, geom_b.gez_geometry)
--
WHERE geom_b.gez_id_geom_zonage = ?
AND (a.tao_id_taxon NOT IN (SELECT base_table.tao_id_taxon FROM base_table WHERE gez_id_geom_zonage = ?))

GROUP BY upper(b.sta_nom_statut),a.tao_id_taxon,d.indice_menace
HAVING MAX(indice_menace) < 4
) f
]]></xml-property>
            <xml-property name="designerValues"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<model:DesignValues xmlns:design="http://www.eclipse.org/datatools/connectivity/oda/design" xmlns:model="http://www.eclipse.org/birt/report/model/adapter/odaModel">
  <Version>2.0</Version>
  <design:ResultSets derivedMetaData="true">
    <design:resultSetDefinitions>
      <design:resultSetColumns>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>type_menace</design:name>
              <design:position>1</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>0</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>type_menace</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>type_menace</design:label>
            <design:formattingHints>
              <design:displaySize>2147483647</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>nb</design:name>
              <design:position>2</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>-5</design:nativeDataTypeCode>
            <design:precision>19</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>nb</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>nb</design:label>
            <design:formattingHints>
              <design:displaySize>20</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
      </design:resultSetColumns>
      <design:criteria/>
    </design:resultSetDefinitions>
  </design:ResultSets>
</model:DesignValues>]]></xml-property>
        </oda-data-set>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="EBZR_Synth_ProtectionEchelon" id="1972">
            <list-property name="columnHints"/>
            <list-property name="parameters">
                <structure>
                    <property name="name">param_1</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">1</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_2</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">2</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
            </list-property>
            <structure name="cachedMetaData"/>
            <method name="beforeOpen"><![CDATA[this.queryText = this.queryText.replace("base_table", params["Nom_Table"]);
this.queryText = this.queryText.replace("base_geom", params["Nom_Table"].replace("tv_taxon_observe_", "tv_geom_zonages_"));
this.queryText = this.queryText.replace("echelon_table", params["Tbl_Echelon"]);
this.queryText = this.queryText.replace("echelon_geom", params["Tbl_Echelon"].replace("tv_taxon_observe_", "tv_geom_zonages_"));]]></method>
            <property name="dataSource">Sigogne3</property>
            <list-property name="resultSet"/>
            <xml-property name="queryText"><![CDATA[SELECT count(distinct(a.tao_id_taxon))

,( CASE WHEN c.tae_cd_protection IN( 'CDO1' --europeen
,'cricetus_1'
,'E70P2'
,'gypaete1'
,'IBO1' --international
,'IBOAE'
,'NA'
,'NAR2'
,'NAR3'
,'NAR4'
,'NAR5'
,'NAR6'
,'NEC1'
,'NI2'
,'NI3'
,'NM2'
,'NMO2'
,'NMO3'
,'NMO4'
,'NO3'
,'NO4'
,'NP1'
,'NV1'
,'NV2'
,'OC2'
,'OC4'
,'OC5'
,'V25P1'
,'V39P1'
,'V70P2') THEN 'Protection nationale' 
WHEN c.tae_cd_protection In('IBOAC','IBOAE','IBOAS','IBOAW','IBOC','IBOEU','IBO1','CD01') THEN 'Protection internationale'
WHEN c.tae_cd_protection = 'RV43' OR c.tae_cd_protection = 'RV26'  THEN 'Protection régionale' 
ELSE ( 'Pas de protection' ) END ) AS type_protection

FROM echelon_table a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref
LEFT JOIN t_taxref_reglementation d ON c.tae_cd_protection = d.tae_cd_protection
--echelon
INNER JOIN echelon_geom geom_a ON a.gez_id_geom_zonage = geom_a.gez_id_geom_zonage
INNER JOIN base_geom geom_b ON ST_INTERSECTS(geom_a.gez_geometry, geom_b.gez_geometry)
--
WHERE geom_b.gez_id_geom_zonage = ?
AND c.tae_cd_protection IN('CDO1'
,'cricetus_1'
,'gypaete1'
,'IAAP'
,'NA'
,'NAR2'
,'NAR3'
,'NAR4'
,'NAR5'
,'NAR6'
,'NEC1'
,'NFM1'
,'NI2'
,'NI3'
,'NM2'
,'NMAMmar2'
,'NMAMmar3'
,'NMAMmar5'
,'NMO2'
,'NMO3'
,'NMO4'
,'NO3'
,'NO4'
,'NP1'
,'NTAA1'
,'NTM1'
,'NV1'
,'NV2'
,'NVM'
,'OC2'
,'OC4'
,'OC5'
,'V39P1','IBOAC','IBOAE','IBOAS','IBOAW','IBOC','IBOEU','IBO1','CD01','RV43')

AND (a.tao_id_taxon NOT IN (SELECT tao_id_taxon FROM base_table WHERE gez_id_geom_zonage = ?))
GROUP BY type_protection,tao_id_taxon
]]></xml-property>
            <xml-property name="designerValues"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<model:DesignValues xmlns:design="http://www.eclipse.org/datatools/connectivity/oda/design" xmlns:model="http://www.eclipse.org/birt/report/model/adapter/odaModel">
  <Version>2.0</Version>
  <design:ResultSets derivedMetaData="true">
    <design:resultSetDefinitions>
      <design:resultSetColumns>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>type_protection</design:name>
              <design:position>1</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>0</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>type_protection</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>type_protection</design:label>
            <design:formattingHints>
              <design:displaySize>2147483647</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>count</design:name>
              <design:position>2</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>-5</design:nativeDataTypeCode>
            <design:precision>19</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>count</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>count</design:label>
            <design:formattingHints>
              <design:displaySize>20</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
      </design:resultSetColumns>
      <design:criteria/>
    </design:resultSetDefinitions>
  </design:ResultSets>
</model:DesignValues>]]></xml-property>
        </oda-data-set>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="EBZR_Synth_BilanMenaceEchelon" id="1973">
            <property name="nullsOrdering">nulls lowest</property>
            <list-property name="columnHints"/>
            <list-property name="parameters">
                <structure>
                    <property name="name">param_1</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">1</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_2</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">2</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_3</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">3</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_4</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">4</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_5</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">5</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_6</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">6</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_7</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">7</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_8</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">8</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_9</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">9</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_10</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">10</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_11</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">11</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_12</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">12</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_13</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">13</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_14</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">14</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_15</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">15</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_16</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">16</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_17</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">17</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_18</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">18</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_19</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">19</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_20</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">20</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_21</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">21</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_22</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">22</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_23</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">23</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_24</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">24</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
            </list-property>
            <structure name="cachedMetaData"/>
            <method name="beforeOpen"><![CDATA[this.queryText = this.queryText.replace("base_table", params["Nom_Table"]);
this.queryText = this.queryText.replace("base_geom", params["Nom_Table"].replace("tv_taxon_observe_", "tv_geom_zonages_"));
this.queryText = this.queryText.replace("echelon_table", params["Tbl_Echelon"]);
this.queryText = this.queryText.replace("echelon_geom", params["Tbl_Echelon"].replace("tv_taxon_observe_", "tv_geom_zonages_"));]]></method>
            <property name="dataSource">Sigogne3</property>
            <list-property name="resultSet"/>
            <xml-property name="queryText"><![CDATA[-- nombre des taxons menacés et quasi menacés avec groupe taxonomique pour la commune choisie
--total
SELECT 'menace' as rowname, count(distinct(tao_id_taxon)), 'total' as gta_nom_groupe_taxonomique
FROM (

SELECT
a.tao_id_taxon,
max(b.sta_nom_statut) AS max_statut_uicn,
d.indice_menace

FROM echelon_table a
 
JOIN tj_taxon_a_statut f ON a.tao_id_taxon = f.tao_id_taxon
LEFT OUTER JOIN tr_statut b ON f.sta_id_statut = b.sta_id_statut AND b.tst_id_type_statut = 33
LEFT JOIN zz_qualif_menace d ON b.sta_nom_statut ilike d.sta_nom_statut
--echelon
INNER JOIN echelon_geom geom_a ON a.gez_id_geom_zonage = geom_a.gez_id_geom_zonage
INNER JOIN base_geom geom_b ON ST_INTERSECTS(geom_a.gez_geometry, geom_b.gez_geometry)
--
WHERE geom_b.gez_id_geom_zonage = ?
AND (a.tao_id_taxon NOT IN (SELECT tao_id_taxon FROM base_table WHERE gez_id_geom_zonage = ?))


GROUP BY upper(b.sta_nom_statut),a.tao_id_taxon,d.indice_menace
HAVING MAX(indice_menace) >=4 ) f

UNION ALL

SELECT --MAX(indice_menace) as menace_max,tao_id_taxon,
'menace' as rowname,count(distinct(tao_id_taxon)) as count,gta_nom_groupe_taxonomique
FROM (

SELECT
a.tao_id_taxon,
max(b.sta_nom_statut) AS max_statut_uicn,gta_nom_groupe_taxonomique,
d.indice_menace

FROM echelon_table a

JOIN t_taxon_observe x ON a.tao_id_taxon = x.tao_id_taxon
JOIN tj_taxon_a_statut f ON a.tao_id_taxon = f.tao_id_taxon
LEFT OUTER JOIN tr_statut b ON f.sta_id_statut = b.sta_id_statut AND b.tst_id_type_statut = 33
LEFT JOIN zz_qualif_menace d ON b.sta_nom_statut ilike d.sta_nom_statut
JOIN tr_groupe_taxonomique e ON x.gta_id_groupe_taxonomique = e.gta_id_groupe_taxonomique
--echelon
INNER JOIN echelon_geom geom_a ON a.gez_id_geom_zonage = geom_a.gez_id_geom_zonage
INNER JOIN base_geom geom_b ON ST_INTERSECTS(geom_a.gez_geometry, geom_b.gez_geometry)
--
WHERE geom_b.gez_id_geom_zonage = ?
AND (a.tao_id_taxon NOT IN (SELECT tao_id_taxon FROM base_table WHERE gez_id_geom_zonage = ?))

GROUP BY upper(b.sta_nom_statut),a.tao_id_taxon,d.indice_menace,gta_nom_groupe_taxonomique
HAVING MAX(indice_menace) >=4 ) f
GROUP BY gta_nom_groupe_taxonomique

UNION ALL

SELECT 'protection' as rowname,sum(tao_id_taxon) as nb_especes_protegees,'total' as gta_nom_groupe_taxonomique

FROM (

SELECT count(distinct(a.tao_id_taxon)) as tao_id_taxon

FROM echelon_table a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref
LEFT JOIN t_taxref_reglementation d ON c.tae_cd_protection = d.tae_cd_protection
--echelon
INNER JOIN echelon_geom geom_a ON a.gez_id_geom_zonage = geom_a.gez_id_geom_zonage
INNER JOIN base_geom geom_b ON ST_INTERSECTS(geom_a.gez_geometry, geom_b.gez_geometry)
--
WHERE geom_b.gez_id_geom_zonage = ?
AND c.tae_cd_protection IN('IBOAC','IBOAE','IBOAS','IBOAW','IBOC','IBOEU','IBO1','CD01') 
AND (a.tao_id_taxon NOT IN (SELECT tao_id_taxon FROM base_table WHERE gez_id_geom_zonage = ?))
UNION

SELECT count(distinct(a.tao_id_taxon)) as tao_id_taxon

FROM echelon_table a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref
LEFT JOIN t_taxref_reglementation d ON c.tae_cd_protection = d.tae_cd_protection
--echelon
INNER JOIN echelon_geom geom_a ON a.gez_id_geom_zonage = geom_a.gez_id_geom_zonage
INNER JOIN base_geom geom_b ON ST_INTERSECTS(geom_a.gez_geometry, geom_b.gez_geometry)
--
WHERE geom_b.gez_id_geom_zonage = ?
AND c.tae_cd_protection IN('CDO1','cricetus_1','gypaete1','IAAP','NA','NAR2','NAR3','NAR4','NAR5','NAR6','NEC1','NFM1','NI2','NI3','NM2','NMAMmar2','NMAMmar3','NMAMmar5','NMO2','NMO3','NMO4','NO3','NO4','NP1','NTAA1','NTM1','NV1','NV2','NVM','OC2','OC4','OC5','V39P1')
AND (a.tao_id_taxon NOT IN (SELECT tao_id_taxon FROM base_table WHERE gez_id_geom_zonage = ?))

UNION

SELECT count(distinct(a.tao_id_taxon)) as tao_id_taxon

FROM echelon_table a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref
LEFT JOIN t_taxref_reglementation d ON c.tae_cd_protection = d.tae_cd_protection
--echelon
INNER JOIN echelon_geom geom_a ON a.gez_id_geom_zonage = geom_a.gez_id_geom_zonage
INNER JOIN base_geom geom_b ON ST_INTERSECTS(geom_a.gez_geometry, geom_b.gez_geometry)
--
WHERE geom_b.gez_id_geom_zonage = ?
AND c.tae_cd_protection = 'RV43'
AND (a.tao_id_taxon NOT IN (SELECT tao_id_taxon FROM base_table WHERE gez_id_geom_zonage = ?))

) t

UNION ALL

--par groupe

SELECT 'protection' as rowname,sum(tao_id_taxon) as nb_especes_protegees, gta_nom_groupe_taxonomique

FROM(

SELECT count(distinct(a.tao_id_taxon)) as tao_id_taxon,gta_nom_groupe_taxonomique

FROM echelon_table a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref
LEFT JOIN t_taxref_reglementation d ON c.tae_cd_protection = d.tae_cd_protection
JOIN t_taxon_observe e ON a.tao_id_taxon = e.tao_id_taxon
JOIN tr_groupe_taxonomique f ON e.gta_id_groupe_taxonomique = f.gta_id_groupe_taxonomique
--echelon
INNER JOIN echelon_geom geom_a ON a.gez_id_geom_zonage = geom_a.gez_id_geom_zonage
INNER JOIN base_geom geom_b ON ST_INTERSECTS(geom_a.gez_geometry, geom_b.gez_geometry)
--
WHERE geom_b.gez_id_geom_zonage = ?
AND c.tae_cd_protection IN('IBOAC','IBOAE','IBOAS','IBOAW','IBOC','IBOEU','IBO1','CD01')
AND (a.tao_id_taxon NOT IN (SELECT tao_id_taxon FROM base_table WHERE gez_id_geom_zonage = ?))
GROUP BY gta_nom_groupe_taxonomique

UNION

SELECT count(distinct(a.tao_id_taxon)) as tao_id_taxon,gta_nom_groupe_taxonomique

FROM echelon_table a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref
LEFT JOIN t_taxref_reglementation d ON c.tae_cd_protection = d.tae_cd_protection
JOIN t_taxon_observe e ON a.tao_id_taxon = e.tao_id_taxon
JOIN tr_groupe_taxonomique f ON e.gta_id_groupe_taxonomique = f.gta_id_groupe_taxonomique
--echelon
INNER JOIN echelon_geom geom_a ON a.gez_id_geom_zonage = geom_a.gez_id_geom_zonage
INNER JOIN base_geom geom_b ON ST_INTERSECTS(geom_a.gez_geometry, geom_b.gez_geometry)
--
WHERE geom_b.gez_id_geom_zonage = ?
AND c.tae_cd_protection IN('CDO1','cricetus_1','gypaete1','IAAP','NA','NAR2','NAR3','NAR4','NAR5','NAR6','NEC1','NFM1','NI2','NI3','NM2','NMAMmar2','NMAMmar3','NMAMmar5','NMO2','NMO3','NMO4','NO3','NO4','NP1','NTAA1','NTM1','NV1','NV2','NVM','OC2','OC4','OC5','V39P1')
AND (a.tao_id_taxon NOT IN (SELECT tao_id_taxon FROM base_table WHERE gez_id_geom_zonage = ?))
GROUP BY gta_nom_groupe_taxonomique

UNION

SELECT count(distinct(a.tao_id_taxon)) as tao_id_taxon,gta_nom_groupe_taxonomique

FROM echelon_table a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref
LEFT JOIN t_taxref_reglementation d ON c.tae_cd_protection = d.tae_cd_protection
JOIN t_taxon_observe e ON a.tao_id_taxon = e.tao_id_taxon
JOIN tr_groupe_taxonomique f ON e.gta_id_groupe_taxonomique = f.gta_id_groupe_taxonomique
--echelon
INNER JOIN echelon_geom geom_a ON a.gez_id_geom_zonage = geom_a.gez_id_geom_zonage
INNER JOIN base_geom geom_b ON ST_INTERSECTS(geom_a.gez_geometry, geom_b.gez_geometry)
--
WHERE geom_b.gez_id_geom_zonage = ?
AND c.tae_cd_protection = 'RV43'
AND (a.tao_id_taxon NOT IN (SELECT tao_id_taxon FROM base_table WHERE gez_id_geom_zonage = ?))
GROUP BY gta_nom_groupe_taxonomique ) t group by gta_nom_groupe_taxonomique 


UNION ALL


-- nombre d’espèces Directive avec groupe taxonomique pour la commune choisie
--total

SELECT 'Directives' as rowname, count(distinct(tao_id_taxon)), 'total' as gta_nom_groupe_taxonomique
FROM echelon_table a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref
LEFT JOIN t_taxref_reglementation d ON c.tae_cd_protection = d.tae_cd_protection
WHERE gez_id_geom_zonage = ?
AND (a.tao_id_taxon NOT IN (SELECT tao_id_taxon FROM base_table WHERE gez_id_geom_zonage = ?))
AND c.tae_cd_protection IN('CDH2','CDH4','CDH5','CDO1','CDO21','CDO22','CDO31','CDO32')

UNION ALL

SELECT 'Directives' as rowname, count(distinct(a.tao_id_taxon)), gta_nom_groupe_taxonomique
FROM echelon_table a
LEFT JOIN t_taxref b ON a.tao_id_taxon = b.tax_id_taxref
LEFT JOIN tj_taxref_protection c ON b.tax_id_taxref = c.tax_id_taxref
LEFT JOIN t_taxref_reglementation d ON c.tae_cd_protection = d.tae_cd_protection
JOIN t_taxon_observe e ON a.tao_id_taxon = e.tao_id_taxon
JOIN tr_groupe_taxonomique f ON e.gta_id_groupe_taxonomique = f.gta_id_groupe_taxonomique

WHERE gez_id_geom_zonage = ?
AND (a.tao_id_taxon NOT IN (SELECT tao_id_taxon FROM base_table WHERE gez_id_geom_zonage = ?))
AND c.tae_cd_protection IN('CDH2','CDH4','CDH5','CDO1','CDO21','CDO22','CDO31','CDO32')

GROUP BY gta_nom_groupe_taxonomique

UNION ALL

-- nombre total taxons
--total
SELECT 'total taxons' as rowname, count(distinct(tv.tao_id_taxon)), 'total' as gta_nom_groupe_taxonomique
FROM echelon_table tv
INNER JOIN t_taxon_observe t ON tv.tao_id_taxon = t.tao_id_taxon 
--
INNER JOIN echelon_geom geom_a ON tv.gez_id_geom_zonage = geom_a.gez_id_geom_zonage
INNER JOIN base_geom geom_b ON ST_INTERSECTS(geom_a.gez_geometry, geom_b.gez_geometry)
--
AND geom_b.gez_id_geom_zonage = ?
AND (tv.tao_id_taxon NOT IN (SELECT tao_id_taxon FROM base_table WHERE gez_id_geom_zonage = ?))

UNION ALL

SELECT 'total taxons' as rowname, COUNT(distinct(tv.tao_id_taxon)) AS nb_especes_directive, gta_nom_groupe_taxonomique 
FROM base_table tv
INNER JOIN t_taxon_observe t ON tv.tao_id_taxon = t.tao_id_taxon 
INNER JOIN tr_groupe_taxonomique tr ON t.gta_id_groupe_taxonomique = tr.gta_id_groupe_taxonomique
--echelon
INNER JOIN echelon_geom geom_a ON tv.gez_id_geom_zonage = geom_a.gez_id_geom_zonage
INNER JOIN base_geom geom_b ON ST_INTERSECTS(geom_a.gez_geometry, geom_b.gez_geometry)
--
WHERE geom_b.gez_id_geom_zonage = ?
AND (tv.tao_id_taxon NOT IN (SELECT tao_id_taxon FROM base_table WHERE gez_id_geom_zonage = ?))
GROUP BY gta_nom_groupe_taxonomique
]]></xml-property>
            <xml-property name="designerValues"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<model:DesignValues xmlns:design="http://www.eclipse.org/datatools/connectivity/oda/design" xmlns:model="http://www.eclipse.org/birt/report/model/adapter/odaModel">
  <Version>2.0</Version>
  <DataSetParameters>
    <parameter>
      <design:ParameterDefinition>
        <design:inOutMode>In</design:inOutMode>
        <design:attributes>
          <design:identifier>
            <design:name></design:name>
            <design:position>1</design:position>
          </design:identifier>
          <design:nativeDataTypeCode>4</design:nativeDataTypeCode>
          <design:precision>0</design:precision>
          <design:scale>0</design:scale>
          <design:nullability>Unknown</design:nullability>
        </design:attributes>
        <design:inputAttributes>
          <design:elementAttributes/>
        </design:inputAttributes>
      </design:ParameterDefinition>
    </parameter>
    <parameter>
      <design:ParameterDefinition>
        <design:inOutMode>In</design:inOutMode>
        <design:attributes>
          <design:identifier>
            <design:name></design:name>
            <design:position>2</design:position>
          </design:identifier>
          <design:nativeDataTypeCode>4</design:nativeDataTypeCode>
          <design:precision>0</design:precision>
          <design:scale>0</design:scale>
          <design:nullability>Unknown</design:nullability>
        </design:attributes>
        <design:inputAttributes>
          <design:elementAttributes/>
        </design:inputAttributes>
      </design:ParameterDefinition>
    </parameter>
    <parameter>
      <design:ParameterDefinition>
        <design:inOutMode>In</design:inOutMode>
        <design:attributes>
          <design:identifier>
            <design:name></design:name>
            <design:position>3</design:position>
          </design:identifier>
          <design:nativeDataTypeCode>4</design:nativeDataTypeCode>
          <design:precision>0</design:precision>
          <design:scale>0</design:scale>
          <design:nullability>Unknown</design:nullability>
        </design:attributes>
        <design:inputAttributes>
          <design:elementAttributes/>
        </design:inputAttributes>
      </design:ParameterDefinition>
    </parameter>
    <parameter>
      <design:ParameterDefinition>
        <design:inOutMode>In</design:inOutMode>
        <design:attributes>
          <design:identifier>
            <design:name></design:name>
            <design:position>4</design:position>
          </design:identifier>
          <design:nativeDataTypeCode>4</design:nativeDataTypeCode>
          <design:precision>0</design:precision>
          <design:scale>0</design:scale>
          <design:nullability>Unknown</design:nullability>
        </design:attributes>
        <design:inputAttributes>
          <design:elementAttributes/>
        </design:inputAttributes>
      </design:ParameterDefinition>
    </parameter>
    <parameter>
      <design:ParameterDefinition>
        <design:inOutMode>In</design:inOutMode>
        <design:attributes>
          <design:identifier>
            <design:name></design:name>
            <design:position>5</design:position>
          </design:identifier>
          <design:nativeDataTypeCode>4</design:nativeDataTypeCode>
          <design:precision>0</design:precision>
          <design:scale>0</design:scale>
          <design:nullability>Unknown</design:nullability>
        </design:attributes>
        <design:inputAttributes>
          <design:elementAttributes/>
        </design:inputAttributes>
      </design:ParameterDefinition>
    </parameter>
    <parameter>
      <design:ParameterDefinition>
        <design:inOutMode>In</design:inOutMode>
        <design:attributes>
          <design:identifier>
            <design:name></design:name>
            <design:position>6</design:position>
          </design:identifier>
          <design:nativeDataTypeCode>4</design:nativeDataTypeCode>
          <design:precision>0</design:precision>
          <design:scale>0</design:scale>
          <design:nullability>Unknown</design:nullability>
        </design:attributes>
        <design:inputAttributes>
          <design:elementAttributes/>
        </design:inputAttributes>
      </design:ParameterDefinition>
    </parameter>
    <parameter>
      <design:ParameterDefinition>
        <design:inOutMode>In</design:inOutMode>
        <design:attributes>
          <design:identifier>
            <design:name></design:name>
            <design:position>7</design:position>
          </design:identifier>
          <design:nativeDataTypeCode>4</design:nativeDataTypeCode>
          <design:precision>0</design:precision>
          <design:scale>0</design:scale>
          <design:nullability>Unknown</design:nullability>
        </design:attributes>
        <design:inputAttributes>
          <design:elementAttributes/>
        </design:inputAttributes>
      </design:ParameterDefinition>
    </parameter>
    <parameter>
      <design:ParameterDefinition>
        <design:inOutMode>In</design:inOutMode>
        <design:attributes>
          <design:identifier>
            <design:name></design:name>
            <design:position>8</design:position>
          </design:identifier>
          <design:nativeDataTypeCode>4</design:nativeDataTypeCode>
          <design:precision>0</design:precision>
          <design:scale>0</design:scale>
          <design:nullability>Unknown</design:nullability>
        </design:attributes>
        <design:inputAttributes>
          <design:elementAttributes/>
        </design:inputAttributes>
      </design:ParameterDefinition>
    </parameter>
  </DataSetParameters>
  <design:ResultSets derivedMetaData="true">
    <design:resultSetDefinitions>
      <design:resultSetColumns>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>rowname</design:name>
              <design:position>1</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>2147483647</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>rowname</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>rowname</design:label>
            <design:formattingHints>
              <design:displaySize>2147483647</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>count</design:name>
              <design:position>2</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>-5</design:nativeDataTypeCode>
            <design:precision>19</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>count</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>count</design:label>
            <design:formattingHints>
              <design:displaySize>20</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>gta_nom_groupe_taxonomique</design:name>
              <design:position>3</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>2147483647</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>gta_nom_groupe_taxonomique</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>gta_nom_groupe_taxonomique</design:label>
            <design:formattingHints>
              <design:displaySize>2147483647</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
      </design:resultSetColumns>
      <design:criteria/>
    </design:resultSetDefinitions>
  </design:ResultSets>
</model:DesignValues>]]></xml-property>
        </oda-data-set>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="EBZR_Synth_BilanMilieuxEchelon" id="1976">
            <list-property name="columnHints"/>
            <list-property name="parameters">
                <structure>
                    <property name="name">param_1</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">1</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_2</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">2</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_3</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">3</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_4</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">4</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_5</property>
                    <property name="paramName">ID_Zonage</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                    <property name="position">5</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
            </list-property>
            <structure name="cachedMetaData"/>
            <method name="beforeOpen"><![CDATA[this.queryText = this.queryText.replace("base_table", params["Nom_Table"]);
this.queryText = this.queryText.replace("base_geom", params["Nom_Table"].replace("tv_taxon_observe_", "tv_geom_zonages_"));
this.queryText = this.queryText.replace("echelon_table", params["Tbl_Echelon"]);
this.queryText = this.queryText.replace("echelon_geom", params["Tbl_Echelon"].replace("tv_taxon_observe_", "tv_geom_zonages_"));]]></method>
            <property name="dataSource">Sigogne3</property>
            <list-property name="resultSet"/>
            <xml-property name="queryText"><![CDATA[--------------------------------------------------
--Mares
SELECT
    'mare' as milieu,
    count(distinct(m.gez_geometry)) as nbtot,
    '0' as superficie

FROM echelon_geom geom_a
--echelon
INNER JOIN base_geom geom_b ON ST_INTERSECTS(geom_a.gez_geometry, geom_b.gez_geometry)
--
INNER JOIN tv_geom_zonages_mare m ON ST_Intersects(geom_a.gez_geometry, m.gez_geometry)
WHERE geom_b.gez_id_geom_zonage = ?
GROUP BY
    geom_b.gez_id_geom_zonage

UNION ALL
-------------------------------------------------------
--Zone humides
SELECT
	'milieu humide' as milieu,
	count(distinct(zh.gez_geometry)) as nbtot,
	coalesce(ceil(SUM(ST_Area(zh.gez_geometry)) / 10000), 0) as superficie
FROM echelon_geom geom_a
--echelon
INNER JOIN base_geom geom_b ON ST_INTERSECTS(geom_a.gez_geometry, geom_b.gez_geometry)
--
INNER JOIN tv_geom_zonages_zones_humides zh ON ST_Intersects(geom_a.gez_geometry, zh.gez_geometry)
WHERE geom_b.gez_id_geom_zonage = ?

UNION ALL
---------------------------------------------------
--Habitat prio
SELECT
	'habitat prioritaire' as milieu,
	count(distinct(h.lpo_geometry)) as nbtot,
	coalesce(ceil(SUM(ST_Area(h.lpo_geometry)) / 10000), 0) as superficie
FROM echelon_geom geom_a
--echelon
INNER JOIN base_geom geom_b ON ST_INTERSECTS(geom_a.gez_geometry, geom_b.gez_geometry)
--
INNER JOIN tv_obs_habitat_interet_polygone h ON ST_Intersects(geom_a.gez_geometry, h.lpo_geometry)

WHERE geom_b.gez_id_geom_zonage = ?

	AND oha_interet_n2000 = 'p'
GROUP BY 
	geom_b.gez_id_geom_zonage

UNION ALL
-----------------------------------------------------
--Habitats intérêt communautaire
SELECT
	'habitat d''intérêt communautaire' as milieu,
	count(distinct(h.lpo_geometry)) as nbtot,
	coalesce(ceil(SUM(ST_Area(h.lpo_geometry)) / 10000), 0) as superficie
FROM echelon_geom geom_a
--echelon
INNER JOIN base_geom geom_b ON ST_INTERSECTS(geom_a.gez_geometry, geom_b.gez_geometry)
--
INNER JOIN tv_obs_habitat_interet_polygone h ON ST_Intersects(geom_a.gez_geometry, h.lpo_geometry)

WHERE geom_b.gez_id_geom_zonage = ?

	AND oha_interet_n2000 = 'c'
GROUP BY 
	geom_b.gez_id_geom_zonage

UNION ALL
-------------------------------------------------------
--Habitats intérêt régional
SELECT
	'habitat d''intérêt régional' as milieu,
	count(distinct(h.lpo_geometry)) as nbtot,
	coalesce(ceil(SUM(ST_Area(h.lpo_geometry)) / 10000), 0) as superficie
FROM echelon_geom geom_a
--echelon
INNER JOIN base_geom geom_b ON ST_INTERSECTS(geom_a.gez_geometry, geom_b.gez_geometry)
--
INNER JOIN tv_obs_habitat_interet_polygone h ON ST_Intersects(geom_a.gez_geometry, h.lpo_geometry)

WHERE geom_b.gez_id_geom_zonage = ?

	AND oha_interet_n2000 = 'r'
GROUP BY 
	geom_b.gez_id_geom_zonage;

]]></xml-property>
            <xml-property name="designerValues"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<model:DesignValues xmlns:design="http://www.eclipse.org/datatools/connectivity/oda/design" xmlns:model="http://www.eclipse.org/birt/report/model/adapter/odaModel">
  <Version>2.0</Version>
  <design:ResultSets derivedMetaData="true">
    <design:resultSetDefinitions>
      <design:resultSetColumns>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>milieu</design:name>
              <design:position>1</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>2147483647</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>milieu</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>milieu</design:label>
            <design:formattingHints>
              <design:displaySize>2147483647</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>nbtot</design:name>
              <design:position>2</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>-5</design:nativeDataTypeCode>
            <design:precision>19</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>nbtot</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>nbtot</design:label>
            <design:formattingHints>
              <design:displaySize>20</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>superficie</design:name>
              <design:position>3</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>8</design:nativeDataTypeCode>
            <design:precision>17</design:precision>
            <design:scale>17</design:scale>
            <design:nullability>Unknown</design:nullability>
            <design:uiHints>
              <design:displayName>superficie</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>superficie</design:label>
            <design:formattingHints>
              <design:displaySize>25</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
      </design:resultSetColumns>
      <design:criteria/>
    </design:resultSetDefinitions>
  </design:ResultSets>
</model:DesignValues>]]></xml-property>
        </oda-data-set>
    </data-sets>
    <cubes>
        <tabular-cube name="EBZR_Synth_Cube" id="675">
            <property name="dimensions">
                <tabular-dimension name="Groupe" id="676">
                    <property name="defaultHierarchy">NewTabularHierarchy</property>
                    <property name="hierarchies">
                        <tabular-hierarchy name="NewTabularHierarchy" id="677">
                            <property name="levels">
                                <tabular-level name="gta_nom_groupe_taxonomique" id="678">
                                    <property name="dataType">string</property>
                                    <property name="columnName">gta_nom_groupe_taxonomique</property>
                                </tabular-level>
                            </property>
                        </tabular-hierarchy>
                    </property>
                </tabular-dimension>
                <tabular-dimension name="Groupe1" id="681">
                    <property name="defaultHierarchy">NewTabularHierarchy1</property>
                    <property name="hierarchies">
                        <tabular-hierarchy name="NewTabularHierarchy1" id="682">
                            <property name="levels">
                                <tabular-level name="rowname" id="683">
                                    <property name="dataType">string</property>
                                    <property name="columnName">rowname</property>
                                </tabular-level>
                            </property>
                        </tabular-hierarchy>
                    </property>
                </tabular-dimension>
            </property>
            <property name="measureGroups">
                <tabular-measure-group name="Champ de récapitulation" id="679">
                    <property name="measures">
                        <tabular-measure name="count" id="680">
                            <expression name="measureExpression" type="javascript">dataSetRow["count"]</expression>
                            <property name="dataType">decimal</property>
                        </tabular-measure>
                    </property>
                </tabular-measure-group>
            </property>
            <property name="dataSet">EBZR_Synth_BilanMenace</property>
        </tabular-cube>
    </cubes>
    <styles>
        <style name="report" id="4">
            <property name="fontFamily">sans-serif</property>
            <property name="fontSize">10pt</property>
        </style>
        <style name="crosstab-cell" id="5">
            <property name="borderBottomColor">#CCCCCC</property>
            <property name="borderBottomStyle">solid</property>
            <property name="borderBottomWidth">1pt</property>
            <property name="borderLeftColor">#CCCCCC</property>
            <property name="borderLeftStyle">solid</property>
            <property name="borderLeftWidth">1pt</property>
            <property name="borderRightColor">#CCCCCC</property>
            <property name="borderRightStyle">solid</property>
            <property name="borderRightWidth">1pt</property>
            <property name="borderTopColor">#CCCCCC</property>
            <property name="borderTopStyle">solid</property>
            <property name="borderTopWidth">1pt</property>
        </style>
        <style name="crosstab" id="6">
            <property name="borderBottomColor">#CCCCCC</property>
            <property name="borderBottomStyle">solid</property>
            <property name="borderBottomWidth">1pt</property>
            <property name="borderLeftColor">#CCCCCC</property>
            <property name="borderLeftStyle">solid</property>
            <property name="borderLeftWidth">1pt</property>
            <property name="borderRightColor">#CCCCCC</property>
            <property name="borderRightStyle">solid</property>
            <property name="borderRightWidth">1pt</property>
            <property name="borderTopColor">#CCCCCC</property>
            <property name="borderTopStyle">solid</property>
            <property name="borderTopWidth">1pt</property>
        </style>
    </styles>
    <page-setup>
        <simple-master-page name="Simple MasterPage" id="2">
            <property name="type">a4</property>
            <property name="orientation">landscape</property>
            <page-footer>
                <text-data id="2083">
                    <property name="textAlign">center</property>
                    <expression name="valueExpr">var annee = new Date().getFullYear();&#13;
var mois = new Date().getMonth()+1;&#13;
var jour = new Date().getDate();&#13;
&#13;
"&lt;a href=\"https://www.sigogne.org\" target=\"_blank\" title=\"Site Internet de Sigogne\">www.sigogne.org &lt;/a>" + " || Page générée le "  + jour + "/" + mois + "/" + annee +   " || " + "&lt;a href=\"https://www.sigogne.org/mentions-legales\" target=\"_blank\" title=\"Accéder aux mentions légales de Sigogne\"> Licence d\'utilisation de Sigogne&lt;/a>"</expression>
                    <property name="contentType">html</property>
                </text-data>
            </page-footer>
        </simple-master-page>
    </page-setup>
    <body>
        <text-data id="2077">
            <property name="backgroundColor">#ECECEC</property>
            <property name="fontWeight">bold</property>
            <property name="textAlign">center</property>
            <list-property name="visibility">
                <structure>
                    <property name="format">all</property>
                    <expression name="valueExpr" type="javascript">params["pdf"].value=="f"</expression>
                </structure>
            </list-property>
            <expression name="valueExpr">"Enjeux biodiversité de la zone requetée - " + params["title"].value</expression>
            <property name="contentType">html</property>
        </text-data>
        <grid name="s1 - Synthèse" id="19">
            <property name="marginTop">1%</property>
            <property name="marginLeft">1%</property>
            <property name="marginBottom">1%</property>
            <property name="marginRight">1%</property>
            <property name="display">block</property>
            <property name="pageBreakAfter">avoid</property>
            <property name="pageBreakBefore">avoid</property>
            <property name="pageBreakInside">avoid</property>
            <property name="height">6.125in</property>
            <property name="width">98%</property>
            <column id="20">
                <property name="width">1.3958333333333333in</property>
            </column>
            <column id="21">
                <property name="width">1.3854166666666667in</property>
            </column>
            <column id="22">
                <property name="width">4.895833333333333in</property>
            </column>
            <row id="2079">
                <property name="height">0.8541666666666666in</property>
                <cell id="2080">
                    <property name="borderRightColor">#000000</property>
                    <property name="borderRightStyle">solid</property>
                    <property name="borderRightWidth">thin</property>
                    <property name="width">50%</property>
                    <text-data name="EBZR_Txt_Menace_Evalue" id="705">
                        <property name="marginLeft">auto</property>
                        <property name="marginRight">auto</property>
                        <property name="width">90%</property>
                        <property name="dataSet">EBZR_Synth_TotalMenace</property>
                        <list-property name="boundDataColumns">
                            <structure>
                                <property name="name">total</property>
                                <text-property name="displayName">total</text-property>
                                <expression name="expression" type="javascript">dataSetRow["total"]</expression>
                                <property name="dataType">decimal</property>
                            </structure>
                            <structure>
                                <property name="name">type_menace</property>
                                <text-property name="displayName">type_menace</text-property>
                                <expression name="expression" type="javascript">dataSetRow["type_menace"]</expression>
                                <property name="dataType">string</property>
                            </structure>
                        </list-property>
                        <expression name="valueExpr">" &lt;FONT size=\"4\">&lt;B>Menace&lt;/B>&lt;/FONT>&lt;BR>&lt;B>nombre d'espèces évalués : " + row["total"] + "&lt;BR>maximum de menace&lt;BR>LR nationale et LR régionale&lt;/B>"</expression>
                        <property name="contentType">html</property>
                    </text-data>
                </cell>
                <cell id="2081">
                    <property name="borderRightColor">#000000</property>
                    <property name="borderRightStyle">solid</property>
                    <property name="borderRightWidth">thin</property>
                    <property name="width">50%</property>
                    <text name="Titre protection" id="702">
                        <property name="marginLeft">auto</property>
                        <property name="marginRight">auto</property>
                        <property name="width">90%</property>
                        <property name="contentType">html</property>
                        <text-property name="content"><![CDATA[<FONT size="4"><B>Protection</B></FONT><BR/>
<B>réglementation nationale ou régionale</B>]]></text-property>
                    </text>
                </cell>
                <cell id="2082">
                    <property name="paddingLeft">0pt</property>
                    <property name="paddingRight">0pt</property>
                    <property name="width">50%</property>
                    <text name="Titre bilan groupe d'espèce" id="45">
                        <property name="marginLeft">auto</property>
                        <property name="marginRight">auto</property>
                        <property name="width">90%</property>
                        <property name="contentType">html</property>
                        <text-property name="content"><![CDATA[<FONT size="4"><B>
Bilan menace et règlementation des groupes d'espèces
</B></FONT>]]></text-property>
                    </text>
                    <extended-item extensionName="Crosstab" extensionVersion="3.7.0" name="Bilan par groupe d'espèces"
 id="1977">
                        <property name="cube">EBZR_Synth_Cube</property>
                        <property name="measures">
                            <extended-item extensionName="MeasureView" id="1978">
                                <property name="measure">count</property>
                                <property name="detail">
                                    <extended-item extensionName="AggregationCell" id="1979">
                                        <property name="aggregationOnRow">Groupe1/rowname</property>
                                        <property name="aggregationOnColumn">Groupe/gta_nom_groupe_taxonomique</property>
                                        <property name="content">
                                            <data id="1980">
                                                <list-property name="highlightRules">
                                                    <structure>
                                                        <property name="operator">eq</property>
                                                        <property name="backgroundColor">#D8FFD9</property>
                                                        <expression name="testExpr" type="javascript">data["gta_nom_groupe_taxonomique"]</expression>
                                                        <simple-property-list name="value1">
                                                            <value type="javascript">"total"</value>
                                                        </simple-property-list>
                                                    </structure>
                                                </list-property>
                                                <property name="resultSetColumn">count_Groupe1/rowname_Groupe/gta_nom_groupe_taxonomique</property>
                                            </data>
                                        </property>
                                    </extended-item>
                                </property>
                                <property name="header">
                                    <extended-item extensionName="CrosstabCell" id="1981"/>
                                </property>
                            </extended-item>
                        </property>
                        <property name="rows">
                            <extended-item extensionName="CrosstabView" id="1982">
                                <property name="views">
                                    <extended-item extensionName="DimensionView" id="1983">
                                        <property name="dimension">Groupe1</property>
                                        <property name="levels">
                                            <extended-item extensionName="LevelView" name="NouveauAffichage de niveau2" id="1984">
                                                <property name="level">Groupe1/rowname</property>
                                                <property name="member">
                                                    <extended-item extensionName="CrosstabCell" id="1985">
                                                        <property name="content">
                                                            <data name="rowname1" id="1986">
                                                                <property name="backgroundColor">#FFFFCC</property>
                                                                <property name="resultSetColumn">rowname</property>
                                                            </data>
                                                        </property>
                                                    </extended-item>
                                                </property>
                                            </extended-item>
                                        </property>
                                    </extended-item>
                                </property>
                            </extended-item>
                        </property>
                        <property name="columns">
                            <extended-item extensionName="CrosstabView" id="1987">
                                <property name="views">
                                    <extended-item extensionName="DimensionView" id="1988">
                                        <property name="dimension">Groupe</property>
                                        <property name="levels">
                                            <extended-item extensionName="LevelView" name="NouveauAffichage de niveau11" id="1989">
                                                <property name="level">Groupe/gta_nom_groupe_taxonomique</property>
                                                <property name="member">
                                                    <extended-item extensionName="CrosstabCell" id="1990">
                                                        <property name="content">
                                                            <data name="gta_nom_groupe_taxonomique1" id="1991">
                                                                <property name="backgroundColor">#FFFFCC</property>
                                                                <list-property name="highlightRules">
                                                                    <structure>
                                                                        <property name="operator">eq</property>
                                                                        <property name="backgroundColor">#D8FFD9</property>
                                                                        <expression name="testExpr" type="javascript">data["gta_nom_groupe_taxonomique"]</expression>
                                                                        <simple-property-list name="value1">
                                                                            <value type="javascript">"total"</value>
                                                                        </simple-property-list>
                                                                    </structure>
                                                                </list-property>
                                                                <property name="resultSetColumn">gta_nom_groupe_taxonomique</property>
                                                            </data>
                                                        </property>
                                                    </extended-item>
                                                </property>
                                            </extended-item>
                                        </property>
                                    </extended-item>
                                </property>
                            </extended-item>
                        </property>
                        <property name="header">
                            <extended-item extensionName="CrosstabCell" id="1992"/>
                        </property>
                        <property name="emptyCellValue">0</property>
                        <property name="marginTop">10px</property>
                        <property name="marginLeft">auto</property>
                        <property name="marginRight">auto</property>
                        <property name="width">90%</property>
                        <list-property name="boundDataColumns">
                            <structure>
                                <property name="name">rowname</property>
                                <expression name="expression">dimension["Groupe1"]["rowname"]</expression>
                                <property name="dataType">string</property>
                            </structure>
                            <structure>
                                <property name="name">gta_nom_groupe_taxonomique</property>
                                <expression name="expression">dimension["Groupe"]["gta_nom_groupe_taxonomique"]</expression>
                                <property name="dataType">string</property>
                            </structure>
                            <structure>
                                <property name="name">count_Groupe1/rowname_Groupe/gta_nom_groupe_taxonomique</property>
                                <expression name="expression">measure["count"]</expression>
                                <property name="dataType">decimal</property>
                                <simple-property-list name="aggregateOn">
                                    <value>Groupe1/rowname</value>
                                    <value>Groupe/gta_nom_groupe_taxonomique</value>
                                </simple-property-list>
                                <property name="aggregateFunction">SUM</property>
                            </structure>
                        </list-property>
                    </extended-item>
                </cell>
            </row>
            <row id="23">
                <property name="height">4.677083333333333in</property>
                <cell id="24">
                    <property name="borderRightColor">#000000</property>
                    <property name="borderRightStyle">solid</property>
                    <property name="borderRightWidth">thin</property>
                    <property name="width">50%</property>
                    <extended-item extensionName="Chart" name="EBZR_Graph_Menace_S" id="2084">
                        <xml-property name="xmlRepresentation"><![CDATA[<model:ChartWithoutAxes xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:attribute="http://www.birt.eclipse.org/ChartModelAttribute" xmlns:layout="http://www.birt.eclipse.org/ChartModelLayout" xmlns:model="http://www.birt.eclipse.org/ChartModel" xmlns:type="http://www.birt.eclipse.org/ChartModelType">
  <Version>2.6.1</Version>
  <Type>Pie Chart</Type>
  <SubType>Standard</SubType>
  <Block>
    <Children xsi:type="layout:TitleBlock">
      <Bounds>
        <Left>0.0</Left>
        <Top>0.0</Top>
        <Width>0.0</Width>
        <Height>0.0</Height>
      </Bounds>
      <Insets>
        <Top>3.0</Top>
        <Left>3.0</Left>
        <Bottom>3.0</Bottom>
        <Right>3.0</Right>
      </Insets>
      <Row>-1</Row>
      <Column>-1</Column>
      <Rowspan>-1</Rowspan>
      <Columnspan>-1</Columnspan>
      <Outline>
        <Style>Solid</Style>
        <Thickness>1</Thickness>
        <Color>
          <Transparency>255</Transparency>
          <Red>0</Red>
          <Green>0</Green>
          <Blue>0</Blue>
        </Color>
        <Visible>false</Visible>
      </Outline>
      <Visible>true</Visible>
      <Label>
        <Caption>
          <Value>Menace</Value>
          <Font>
            <Size>16.0</Size>
            <Bold>true</Bold>
            <Alignment>
              <horizontalAlignment>Center</horizontalAlignment>
              <verticalAlignment>Center</verticalAlignment>
            </Alignment>
          </Font>
        </Caption>
        <Background xsi:type="attribute:ColorDefinition">
          <Transparency>0</Transparency>
          <Red>255</Red>
          <Green>255</Green>
          <Blue>255</Blue>
        </Background>
        <Outline>
          <Style>Solid</Style>
          <Thickness>1</Thickness>
          <Color>
            <Transparency>255</Transparency>
            <Red>0</Red>
            <Green>0</Green>
            <Blue>0</Blue>
          </Color>
        </Outline>
        <Insets>
          <Top>0.0</Top>
          <Left>2.0</Left>
          <Bottom>0.0</Bottom>
          <Right>3.0</Right>
        </Insets>
        <Visible>true</Visible>
      </Label>
    </Children>
    <Children xsi:type="layout:Plot">
      <Bounds>
        <Left>0.0</Left>
        <Top>0.0</Top>
        <Width>0.0</Width>
        <Height>0.0</Height>
      </Bounds>
      <Insets>
        <Top>3.0</Top>
        <Left>3.0</Left>
        <Bottom>3.0</Bottom>
        <Right>3.0</Right>
      </Insets>
      <Row>-1</Row>
      <Column>-1</Column>
      <Rowspan>-1</Rowspan>
      <Columnspan>-1</Columnspan>
      <Outline>
        <Style>Solid</Style>
        <Thickness>1</Thickness>
        <Color>
          <Transparency>255</Transparency>
          <Red>0</Red>
          <Green>0</Green>
          <Blue>0</Blue>
        </Color>
        <Visible>false</Visible>
      </Outline>
      <Visible>true</Visible>
      <HorizontalSpacing>5</HorizontalSpacing>
      <VerticalSpacing>5</VerticalSpacing>
      <ClientArea>
        <Outline>
          <Style>Solid</Style>
          <Thickness>0</Thickness>
          <Color>
            <Transparency>255</Transparency>
            <Red>0</Red>
            <Green>0</Green>
            <Blue>0</Blue>
          </Color>
          <Visible>false</Visible>
        </Outline>
        <Insets>
          <Top>0.0</Top>
          <Left>0.0</Left>
          <Bottom>0.0</Bottom>
          <Right>0.0</Right>
        </Insets>
      </ClientArea>
    </Children>
    <Children xsi:type="layout:Legend">
      <Bounds>
        <Left>0.0</Left>
        <Top>0.0</Top>
        <Width>0.0</Width>
        <Height>0.0</Height>
      </Bounds>
      <Anchor>West</Anchor>
      <Insets>
        <Top>3.0</Top>
        <Left>3.0</Left>
        <Bottom>3.0</Bottom>
        <Right>3.0</Right>
      </Insets>
      <Row>-1</Row>
      <Column>-1</Column>
      <Rowspan>-1</Rowspan>
      <Columnspan>-1</Columnspan>
      <Outline>
        <Style>Solid</Style>
        <Thickness>1</Thickness>
        <Color>
          <Transparency>255</Transparency>
          <Red>0</Red>
          <Green>0</Green>
          <Blue>0</Blue>
        </Color>
        <Visible>false</Visible>
      </Outline>
      <Visible>true</Visible>
      <ClientArea>
        <Outline>
          <Style>Solid</Style>
          <Thickness>0</Thickness>
          <Color>
            <Transparency>255</Transparency>
            <Red>0</Red>
            <Green>0</Green>
            <Blue>0</Blue>
          </Color>
          <Visible>false</Visible>
        </Outline>
        <Insets>
          <Top>2.0</Top>
          <Left>2.0</Left>
          <Bottom>2.0</Bottom>
          <Right>2.0</Right>
        </Insets>
      </ClientArea>
      <Text>
        <Value></Value>
        <Font>
          <Alignment/>
        </Font>
      </Text>
      <Orientation>Vertical</Orientation>
      <Direction>Top_Bottom</Direction>
      <Separator>
        <Style>Solid</Style>
        <Thickness>1</Thickness>
        <Color>
          <Transparency>255</Transparency>
          <Red>0</Red>
          <Green>0</Green>
          <Blue>0</Blue>
        </Color>
        <Visible>true</Visible>
      </Separator>
      <Position>Below</Position>
      <ItemType>Categories</ItemType>
      <Title>
        <Caption>
          <Value></Value>
          <Font>
            <Alignment/>
          </Font>
        </Caption>
        <Background xsi:type="attribute:ColorDefinition">
          <Transparency>0</Transparency>
          <Red>255</Red>
          <Green>255</Green>
          <Blue>255</Blue>
        </Background>
        <Outline>
          <Style>Solid</Style>
          <Thickness>1</Thickness>
          <Color>
            <Transparency>255</Transparency>
            <Red>0</Red>
            <Green>0</Green>
            <Blue>0</Blue>
          </Color>
          <Visible>false</Visible>
        </Outline>
        <Insets>
          <Top>0.0</Top>
          <Left>2.0</Left>
          <Bottom>0.0</Bottom>
          <Right>3.0</Right>
        </Insets>
        <Visible>false</Visible>
      </Title>
      <TitlePosition>Above</TitlePosition>
    </Children>
    <Bounds>
      <Left>0.0</Left>
      <Top>0.0</Top>
      <Width>211.5</Width>
      <Height>130.0</Height>
    </Bounds>
    <Insets>
      <Top>3.0</Top>
      <Left>3.0</Left>
      <Bottom>3.0</Bottom>
      <Right>3.0</Right>
    </Insets>
    <Row>-1</Row>
    <Column>-1</Column>
    <Rowspan>-1</Rowspan>
    <Columnspan>-1</Columnspan>
    <Outline>
      <Style>Solid</Style>
      <Thickness>1</Thickness>
      <Color>
        <Transparency>255</Transparency>
        <Red>0</Red>
        <Green>0</Green>
        <Blue>0</Blue>
      </Color>
      <Visible>false</Visible>
    </Outline>
    <Visible>true</Visible>
  </Block>
  <Dimension>Two_Dimensional</Dimension>
  <Script>function beforeDrawDataPoint( dph, fill, icsc )&#xD;
{&#xD;
 if( dph.getBaseDisplayValue() == &quot;Espèces menacées&quot; ){&#xD;
  importPackage( Packages.org.eclipse.birt.chart.model.attribute.impl );&#xD;
        fill.set(255, 0, 0);&#xD;
    }&#xD;
 if( dph.getBaseDisplayValue() == &quot;Espèces quasi menacées et à données insuffisantes&quot; ){&#xD;
  importPackage( Packages.org.eclipse.birt.chart.model.attribute.impl );&#xD;
        fill.set(255, 128, 0);&#xD;
    }&#xD;
 if( dph.getBaseDisplayValue() == &quot;Espèces à préoccupation mineure et espèces non évaluées&quot; ){&#xD;
  importPackage( Packages.org.eclipse.birt.chart.model.attribute.impl );&#xD;
        fill.set(220, 220, 200);&#xD;
    }&#xD;
}&#xD;
&#xD;
function beforeDrawLegendItem( lerh, bounds, icsc )&#xD;
{&#xD;
  if( lerh.getLabel().getCaption().getValue() == &quot;Espèces menacées&quot;){              &#xD;
   importPackage( Packages.org.eclipse.birt.chart.model.attribute.impl );&#xD;
        lerh.getFill().set(255, 0, 0);&#xD;
    }&#xD;
  if( lerh.getLabel().getCaption().getValue() == &quot;Espèces quasi menacées et à données insuffisantes&quot;){              &#xD;
   importPackage( Packages.org.eclipse.birt.chart.model.attribute.impl );&#xD;
        lerh.getFill().set(255, 128, 0);&#xD;
    }&#xD;
  if( lerh.getLabel().getCaption().getValue() == &quot;Espèces à préoccupation mineure et espèces non évaluées&quot;){              &#xD;
   importPackage( Packages.org.eclipse.birt.chart.model.attribute.impl );&#xD;
        lerh.getFill().set(220, 220, 200);&#xD;
    }&#xD;
}</Script>
  <Units>Points</Units>
  <SeriesThickness>10.0</SeriesThickness>
  <GridColumnCount>0</GridColumnCount>
  <ExtendedProperties>
    <Name>enable.area.alt</Name>
    <Value>false</Value>
  </ExtendedProperties>
  <SampleData>
    <BaseSampleData>
      <DataSetRepresentation>'A','B','C','D','E'</DataSetRepresentation>
    </BaseSampleData>
    <OrthogonalSampleData>
      <DataSetRepresentation>6,4,12,8,10</DataSetRepresentation>
      <SeriesDefinitionIndex>0</SeriesDefinitionIndex>
    </OrthogonalSampleData>
  </SampleData>
  <Interactivity/>
  <EmptyMessage>
    <Caption>
      <Value>This chart contains no data.</Value>
      <Font>
        <Alignment>
          <horizontalAlignment>Center</horizontalAlignment>
          <verticalAlignment>Center</verticalAlignment>
        </Alignment>
      </Font>
    </Caption>
    <Background xsi:type="attribute:ColorDefinition">
      <Transparency>64</Transparency>
      <Red>127</Red>
      <Green>127</Green>
      <Blue>127</Blue>
    </Background>
    <Outline>
      <Color>
        <Transparency>128</Transparency>
        <Red>127</Red>
        <Green>127</Green>
        <Blue>127</Blue>
      </Color>
      <Visible>true</Visible>
    </Outline>
    <Insets>
      <Top>10.0</Top>
      <Left>10.0</Left>
      <Bottom>10.0</Bottom>
      <Right>10.0</Right>
    </Insets>
    <Visible>false</Visible>
  </EmptyMessage>
  <SeriesDefinitions>
    <Query>
      <Definition></Definition>
    </Query>
    <SeriesPalette>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>80</Red>
        <Green>166</Green>
        <Blue>218</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>242</Red>
        <Green>88</Green>
        <Blue>106</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>232</Red>
        <Green>172</Green>
        <Blue>57</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>128</Red>
        <Green>255</Green>
        <Blue>128</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>64</Red>
        <Green>128</Green>
        <Blue>128</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>128</Red>
        <Green>128</Green>
        <Blue>192</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>170</Red>
        <Green>85</Green>
        <Blue>85</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>128</Red>
        <Green>128</Green>
        <Blue>0</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>192</Red>
        <Green>192</Green>
        <Blue>192</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>255</Red>
        <Green>255</Green>
        <Blue>128</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>128</Red>
        <Green>192</Green>
        <Blue>128</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>7</Red>
        <Green>146</Green>
        <Blue>94</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>0</Red>
        <Green>128</Green>
        <Blue>255</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>255</Red>
        <Green>128</Green>
        <Blue>192</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>0</Red>
        <Green>255</Green>
        <Blue>255</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>255</Red>
        <Green>128</Green>
        <Blue>128</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>0</Red>
        <Green>128</Green>
        <Blue>192</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>255</Red>
        <Green>0</Green>
        <Blue>255</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>128</Red>
        <Green>64</Green>
        <Blue>64</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>255</Red>
        <Green>128</Green>
        <Blue>64</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>80</Red>
        <Green>240</Green>
        <Blue>120</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>0</Red>
        <Green>64</Green>
        <Blue>128</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>128</Red>
        <Green>0</Green>
        <Blue>64</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>255</Red>
        <Green>0</Green>
        <Blue>128</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>128</Red>
        <Green>128</Green>
        <Blue>64</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>128</Red>
        <Green>128</Green>
        <Blue>128</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>255</Red>
        <Green>128</Green>
        <Blue>255</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>0</Red>
        <Green>64</Green>
        <Blue>0</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>0</Red>
        <Green>0</Green>
        <Blue>0</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>255</Red>
        <Green>255</Green>
        <Blue>255</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>255</Red>
        <Green>128</Green>
        <Blue>0</Blue>
      </Entries>
    </SeriesPalette>
    <SeriesDefinitions>
      <Query>
        <Definition></Definition>
      </Query>
      <SeriesPalette>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>80</Red>
          <Green>166</Green>
          <Blue>218</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>242</Red>
          <Green>88</Green>
          <Blue>106</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>232</Red>
          <Green>172</Green>
          <Blue>57</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>128</Red>
          <Green>255</Green>
          <Blue>128</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>64</Red>
          <Green>128</Green>
          <Blue>128</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>128</Red>
          <Green>128</Green>
          <Blue>192</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>170</Red>
          <Green>85</Green>
          <Blue>85</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>128</Red>
          <Green>128</Green>
          <Blue>0</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>192</Red>
          <Green>192</Green>
          <Blue>192</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>255</Red>
          <Green>255</Green>
          <Blue>128</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>128</Red>
          <Green>192</Green>
          <Blue>128</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>7</Red>
          <Green>146</Green>
          <Blue>94</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>0</Red>
          <Green>128</Green>
          <Blue>255</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>255</Red>
          <Green>128</Green>
          <Blue>192</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>0</Red>
          <Green>255</Green>
          <Blue>255</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>255</Red>
          <Green>128</Green>
          <Blue>128</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>0</Red>
          <Green>128</Green>
          <Blue>192</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>255</Red>
          <Green>0</Green>
          <Blue>255</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>128</Red>
          <Green>64</Green>
          <Blue>64</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>255</Red>
          <Green>128</Green>
          <Blue>64</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>80</Red>
          <Green>240</Green>
          <Blue>120</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>0</Red>
          <Green>64</Green>
          <Blue>128</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>128</Red>
          <Green>0</Green>
          <Blue>64</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>255</Red>
          <Green>0</Green>
          <Blue>128</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>128</Red>
          <Green>128</Green>
          <Blue>64</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>128</Red>
          <Green>128</Green>
          <Blue>128</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>255</Red>
          <Green>128</Green>
          <Blue>255</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>0</Red>
          <Green>64</Green>
          <Blue>0</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>0</Red>
          <Green>0</Green>
          <Blue>0</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>255</Red>
          <Green>255</Green>
          <Blue>255</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>255</Red>
          <Green>128</Green>
          <Blue>0</Blue>
        </Entries>
      </SeriesPalette>
      <Series xsi:type="type:PieSeries">
        <Visible>true</Visible>
        <Label>
          <Caption>
            <Value></Value>
            <Font>
              <Alignment/>
            </Font>
          </Caption>
          <Background xsi:type="attribute:ColorDefinition">
            <Transparency>0</Transparency>
            <Red>255</Red>
            <Green>255</Green>
            <Blue>255</Blue>
          </Background>
          <Outline>
            <Style>Solid</Style>
            <Thickness>1</Thickness>
            <Color>
              <Transparency>255</Transparency>
              <Red>0</Red>
              <Green>0</Green>
              <Blue>0</Blue>
            </Color>
            <Visible>false</Visible>
          </Outline>
          <Insets>
            <Top>0.0</Top>
            <Left>2.0</Left>
            <Bottom>0.0</Bottom>
            <Right>3.0</Right>
          </Insets>
          <Visible>true</Visible>
        </Label>
        <DataDefinition>
          <Definition>row[&quot;total&quot;]</Definition>
          <Grouping>
            <GroupType>Text</GroupType>
            <AggregateExpression>Sum</AggregateExpression>
          </Grouping>
        </DataDefinition>
        <DataPoint>
          <Components>
            <Type>Orthogonal_Value</Type>
          </Components>
          <Separator>, </Separator>
        </DataPoint>
        <LabelPosition>Outside</LabelPosition>
        <Stacked>false</Stacked>
        <Triggers>
          <Condition>onmouseover</Condition>
          <Action>
            <Type>Show_Tooltip</Type>
            <Value xsi:type="attribute:TooltipValue">
              <Text></Text>
              <Delay>200</Delay>
            </Value>
          </Action>
        </Triggers>
        <Explosion>0</Explosion>
        <Title>
          <Caption>
            <Value></Value>
            <Font>
              <Size>16.0</Size>
              <Bold>true</Bold>
              <Alignment/>
            </Font>
          </Caption>
          <Background xsi:type="attribute:ColorDefinition">
            <Transparency>0</Transparency>
            <Red>255</Red>
            <Green>255</Green>
            <Blue>255</Blue>
          </Background>
          <Outline>
            <Style>Solid</Style>
            <Thickness>1</Thickness>
            <Color>
              <Transparency>255</Transparency>
              <Red>0</Red>
              <Green>0</Green>
              <Blue>0</Blue>
            </Color>
          </Outline>
          <Insets>
            <Top>0.0</Top>
            <Left>2.0</Left>
            <Bottom>0.0</Bottom>
            <Right>3.0</Right>
          </Insets>
          <Visible>true</Visible>
        </Title>
        <TitlePosition>Below</TitlePosition>
        <LeaderLineAttributes>
          <Style>Solid</Style>
          <Thickness>1</Thickness>
          <Visible>true</Visible>
        </LeaderLineAttributes>
        <LeaderLineLength>10.0</LeaderLineLength>
      </Series>
      <Grouping>
        <GroupType>Text</GroupType>
        <AggregateExpression>Sum</AggregateExpression>
      </Grouping>
    </SeriesDefinitions>
    <Series>
      <Visible>true</Visible>
      <Label>
        <Caption>
          <Value></Value>
          <Font>
            <Alignment/>
          </Font>
        </Caption>
        <Background xsi:type="attribute:ColorDefinition">
          <Transparency>0</Transparency>
          <Red>255</Red>
          <Green>255</Green>
          <Blue>255</Blue>
        </Background>
        <Outline>
          <Style>Solid</Style>
          <Thickness>1</Thickness>
          <Color>
            <Transparency>255</Transparency>
            <Red>0</Red>
            <Green>0</Green>
            <Blue>0</Blue>
          </Color>
          <Visible>false</Visible>
        </Outline>
        <Insets>
          <Top>0.0</Top>
          <Left>2.0</Left>
          <Bottom>0.0</Bottom>
          <Right>3.0</Right>
        </Insets>
        <Visible>false</Visible>
      </Label>
      <DataDefinition>
        <Definition>row[&quot;type_menace&quot;]</Definition>
      </DataDefinition>
      <SeriesIdentifier></SeriesIdentifier>
      <DataPoint>
        <Components>
          <Type>Orthogonal_Value</Type>
        </Components>
        <Separator>, </Separator>
      </DataPoint>
      <LabelPosition>Outside</LabelPosition>
      <Stacked>false</Stacked>
    </Series>
    <Grouping>
      <Enabled>true</Enabled>
      <GroupType>Text</GroupType>
      <AggregateExpression>Sum</AggregateExpression>
    </Grouping>
  </SeriesDefinitions>
</model:ChartWithoutAxes>
]]></xml-property>
                        <property name="outputFormat">SVG</property>
                        <property name="inheritColumns">false</property>
                        <property name="height">3.96875in</property>
                        <property name="width">211.5pt</property>
                        <property name="dataSet">EBZR_Synth_Menace</property>
                        <list-property name="boundDataColumns">
                            <structure>
                                <property name="name">total</property>
                                <text-property name="displayName">total</text-property>
                                <expression name="expression" type="javascript">dataSetRow["total"]</expression>
                                <property name="dataType">decimal</property>
                            </structure>
                            <structure>
                                <property name="name">type_menace</property>
                                <text-property name="displayName">type_menace</text-property>
                                <expression name="expression" type="javascript">dataSetRow["type_menace"]</expression>
                                <property name="dataType">string</property>
                            </structure>
                        </list-property>
                    </extended-item>
                    <text name="Plus d'info menace" id="41">
                        <property name="marginLeft">auto</property>
                        <property name="marginRight">auto</property>
                        <property name="width">90%</property>
                        <property name="contentType">html</property>
                        <text-property name="content"><![CDATA[<a href="http://www.sigogne.org/index.php?option=com_content&amp;view=article&amp;id=43:mise-en-oeuvre-de-levaluation-environnementale&amp;catid=32:documents-techniques&amp;Itemid=10" onclick="window.open(this.href); return false;">Éviter, réduire, compenser les atteintes à la biodiversité</a><BR>

<I>Pour plus d'informations, cliquer sur l'onglet Menace</I>]]></text-property>
                    </text>
                </cell>
                <cell id="25">
                    <property name="borderRightColor">#000000</property>
                    <property name="borderRightStyle">solid</property>
                    <property name="borderRightWidth">thin</property>
                    <property name="width">50%</property>
                    <extended-item extensionName="Chart" name="EBZR_Graph_Protection_S" id="2085">
                        <xml-property name="xmlRepresentation"><![CDATA[<model:ChartWithoutAxes xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:attribute="http://www.birt.eclipse.org/ChartModelAttribute" xmlns:layout="http://www.birt.eclipse.org/ChartModelLayout" xmlns:model="http://www.birt.eclipse.org/ChartModel" xmlns:type="http://www.birt.eclipse.org/ChartModelType">
  <Version>2.6.1</Version>
  <Type>Pie Chart</Type>
  <SubType>Standard</SubType>
  <Block>
    <Children xsi:type="layout:TitleBlock">
      <Bounds>
        <Left>0.0</Left>
        <Top>0.0</Top>
        <Width>0.0</Width>
        <Height>0.0</Height>
      </Bounds>
      <Insets>
        <Top>3.0</Top>
        <Left>3.0</Left>
        <Bottom>3.0</Bottom>
        <Right>3.0</Right>
      </Insets>
      <Row>-1</Row>
      <Column>-1</Column>
      <Rowspan>-1</Rowspan>
      <Columnspan>-1</Columnspan>
      <Outline>
        <Style>Solid</Style>
        <Thickness>1</Thickness>
        <Color>
          <Transparency>255</Transparency>
          <Red>0</Red>
          <Green>0</Green>
          <Blue>0</Blue>
        </Color>
        <Visible>false</Visible>
      </Outline>
      <Visible>true</Visible>
      <Label>
        <Caption>
          <Value>Protection</Value>
          <Font>
            <Size>16.0</Size>
            <Bold>true</Bold>
            <Alignment>
              <horizontalAlignment>Center</horizontalAlignment>
              <verticalAlignment>Center</verticalAlignment>
            </Alignment>
          </Font>
        </Caption>
        <Background xsi:type="attribute:ColorDefinition">
          <Transparency>0</Transparency>
          <Red>255</Red>
          <Green>255</Green>
          <Blue>255</Blue>
        </Background>
        <Outline>
          <Style>Solid</Style>
          <Thickness>1</Thickness>
          <Color>
            <Transparency>255</Transparency>
            <Red>0</Red>
            <Green>0</Green>
            <Blue>0</Blue>
          </Color>
        </Outline>
        <Insets>
          <Top>0.0</Top>
          <Left>2.0</Left>
          <Bottom>0.0</Bottom>
          <Right>3.0</Right>
        </Insets>
        <Visible>true</Visible>
      </Label>
    </Children>
    <Children xsi:type="layout:Plot">
      <Bounds>
        <Left>0.0</Left>
        <Top>0.0</Top>
        <Width>0.0</Width>
        <Height>0.0</Height>
      </Bounds>
      <Insets>
        <Top>3.0</Top>
        <Left>3.0</Left>
        <Bottom>3.0</Bottom>
        <Right>3.0</Right>
      </Insets>
      <Row>-1</Row>
      <Column>-1</Column>
      <Rowspan>-1</Rowspan>
      <Columnspan>-1</Columnspan>
      <Outline>
        <Style>Solid</Style>
        <Thickness>1</Thickness>
        <Color>
          <Transparency>255</Transparency>
          <Red>0</Red>
          <Green>0</Green>
          <Blue>0</Blue>
        </Color>
        <Visible>false</Visible>
      </Outline>
      <Visible>true</Visible>
      <HorizontalSpacing>5</HorizontalSpacing>
      <VerticalSpacing>5</VerticalSpacing>
      <ClientArea>
        <Outline>
          <Style>Solid</Style>
          <Thickness>0</Thickness>
          <Color>
            <Transparency>255</Transparency>
            <Red>0</Red>
            <Green>0</Green>
            <Blue>0</Blue>
          </Color>
          <Visible>false</Visible>
        </Outline>
        <Insets>
          <Top>0.0</Top>
          <Left>0.0</Left>
          <Bottom>0.0</Bottom>
          <Right>0.0</Right>
        </Insets>
      </ClientArea>
    </Children>
    <Children xsi:type="layout:Legend">
      <Bounds>
        <Left>0.0</Left>
        <Top>0.0</Top>
        <Width>0.0</Width>
        <Height>0.0</Height>
      </Bounds>
      <Anchor>West</Anchor>
      <Insets>
        <Top>3.0</Top>
        <Left>3.0</Left>
        <Bottom>3.0</Bottom>
        <Right>3.0</Right>
      </Insets>
      <Row>-1</Row>
      <Column>-1</Column>
      <Rowspan>-1</Rowspan>
      <Columnspan>-1</Columnspan>
      <Outline>
        <Style>Solid</Style>
        <Thickness>1</Thickness>
        <Color>
          <Transparency>255</Transparency>
          <Red>0</Red>
          <Green>0</Green>
          <Blue>0</Blue>
        </Color>
        <Visible>false</Visible>
      </Outline>
      <Visible>true</Visible>
      <ClientArea>
        <Outline>
          <Style>Solid</Style>
          <Thickness>0</Thickness>
          <Color>
            <Transparency>255</Transparency>
            <Red>0</Red>
            <Green>0</Green>
            <Blue>0</Blue>
          </Color>
          <Visible>false</Visible>
        </Outline>
        <Insets>
          <Top>2.0</Top>
          <Left>2.0</Left>
          <Bottom>2.0</Bottom>
          <Right>2.0</Right>
        </Insets>
      </ClientArea>
      <Text>
        <Value></Value>
        <Font>
          <Alignment/>
        </Font>
      </Text>
      <Orientation>Vertical</Orientation>
      <Direction>Top_Bottom</Direction>
      <Separator>
        <Style>Solid</Style>
        <Thickness>1</Thickness>
        <Color>
          <Transparency>255</Transparency>
          <Red>0</Red>
          <Green>0</Green>
          <Blue>0</Blue>
        </Color>
        <Visible>true</Visible>
      </Separator>
      <Position>Below</Position>
      <ItemType>Categories</ItemType>
      <Title>
        <Caption>
          <Value></Value>
          <Font>
            <Alignment/>
          </Font>
        </Caption>
        <Background xsi:type="attribute:ColorDefinition">
          <Transparency>0</Transparency>
          <Red>255</Red>
          <Green>255</Green>
          <Blue>255</Blue>
        </Background>
        <Outline>
          <Style>Solid</Style>
          <Thickness>1</Thickness>
          <Color>
            <Transparency>255</Transparency>
            <Red>0</Red>
            <Green>0</Green>
            <Blue>0</Blue>
          </Color>
          <Visible>false</Visible>
        </Outline>
        <Insets>
          <Top>0.0</Top>
          <Left>2.0</Left>
          <Bottom>0.0</Bottom>
          <Right>3.0</Right>
        </Insets>
        <Visible>false</Visible>
      </Title>
      <TitlePosition>Above</TitlePosition>
    </Children>
    <Bounds>
      <Left>0.0</Left>
      <Top>0.0</Top>
      <Width>211.5</Width>
      <Height>130.0</Height>
    </Bounds>
    <Insets>
      <Top>3.0</Top>
      <Left>3.0</Left>
      <Bottom>3.0</Bottom>
      <Right>3.0</Right>
    </Insets>
    <Row>-1</Row>
    <Column>-1</Column>
    <Rowspan>-1</Rowspan>
    <Columnspan>-1</Columnspan>
    <Outline>
      <Style>Solid</Style>
      <Thickness>1</Thickness>
      <Color>
        <Transparency>255</Transparency>
        <Red>0</Red>
        <Green>0</Green>
        <Blue>0</Blue>
      </Color>
      <Visible>false</Visible>
    </Outline>
    <Visible>true</Visible>
  </Block>
  <Dimension>Two_Dimensional</Dimension>
  <Script>function beforeDrawDataPoint( dph, fill, icsc )&#xD;
{&#xD;
 if( dph.getBaseDisplayValue() == &quot;Protection nationale&quot; ){&#xD;
  importPackage( Packages.org.eclipse.birt.chart.model.attribute.impl );&#xD;
        fill.set(255, 87, 51);&#xD;
    }&#xD;
 if( dph.getBaseDisplayValue() == &quot;Protection régionale&quot; ){&#xD;
  importPackage( Packages.org.eclipse.birt.chart.model.attribute.impl );&#xD;
        fill.set(26, 82, 118);&#xD;
    }&#xD;
 if( dph.getBaseDisplayValue() == &quot;Protection internationale&quot; ){&#xD;
   importPackage( Packages.org.eclipse.birt.chart.model.attribute.impl );&#xD;
	     fill.set(93, 173, 226);&#xD;
	}&#xD;
    &#xD;
 if( dph.getBaseDisplayValue() == &quot;Pas de protection et pas de réglementation&quot; ){&#xD;
  importPackage( Packages.org.eclipse.birt.chart.model.attribute.impl );&#xD;
        fill.set(220, 220, 200);&#xD;
    }&#xD;
    &#xD;
}&#xD;
&#xD;
function beforeDrawLegendItem( lerh, bounds, icsc )&#xD;
{&#xD;
  if( lerh.getLabel().getCaption().getValue() == &quot;Protection nationale&quot;){              &#xD;
   importPackage( Packages.org.eclipse.birt.chart.model.attribute.impl );&#xD;
        lerh.getFill().set(255, 87, 51);&#xD;
    }&#xD;
  if( lerh.getLabel().getCaption().getValue() == &quot;Protection régionale&quot;){              &#xD;
   importPackage( Packages.org.eclipse.birt.chart.model.attribute.impl );&#xD;
        lerh.getFill().set(26, 82, 118);&#xD;
    }&#xD;
  if( lerh.getLabel().getCaption().getValue() == &quot;Protection internationale&quot;){              &#xD;
   importPackage( Packages.org.eclipse.birt.chart.model.attribute.impl );&#xD;
        lerh.getFill().set(93, 173, 226);&#xD;
    }&#xD;
  if( lerh.getLabel().getCaption().getValue() == &quot;Pas de protection et pas de réglementation&quot;){              &#xD;
   importPackage( Packages.org.eclipse.birt.chart.model.attribute.impl );&#xD;
        lerh.getFill().set(220, 220, 220);&#xD;
    }&#xD;
}</Script>
  <Units>Points</Units>
  <SeriesThickness>10.0</SeriesThickness>
  <GridColumnCount>0</GridColumnCount>
  <ExtendedProperties>
    <Name>enable.area.alt</Name>
    <Value>false</Value>
  </ExtendedProperties>
  <SampleData>
    <BaseSampleData>
      <DataSetRepresentation>'A','B','C','D','E'</DataSetRepresentation>
    </BaseSampleData>
    <OrthogonalSampleData>
      <DataSetRepresentation>6,4,12,8,10</DataSetRepresentation>
      <SeriesDefinitionIndex>0</SeriesDefinitionIndex>
    </OrthogonalSampleData>
  </SampleData>
  <Interactivity/>
  <EmptyMessage>
    <Caption>
      <Value>This chart contains no data.</Value>
      <Font>
        <Alignment>
          <horizontalAlignment>Center</horizontalAlignment>
          <verticalAlignment>Center</verticalAlignment>
        </Alignment>
      </Font>
    </Caption>
    <Background xsi:type="attribute:ColorDefinition">
      <Transparency>64</Transparency>
      <Red>127</Red>
      <Green>127</Green>
      <Blue>127</Blue>
    </Background>
    <Outline>
      <Color>
        <Transparency>128</Transparency>
        <Red>127</Red>
        <Green>127</Green>
        <Blue>127</Blue>
      </Color>
      <Visible>true</Visible>
    </Outline>
    <Insets>
      <Top>10.0</Top>
      <Left>10.0</Left>
      <Bottom>10.0</Bottom>
      <Right>10.0</Right>
    </Insets>
    <Visible>false</Visible>
  </EmptyMessage>
  <SeriesDefinitions>
    <Query>
      <Definition></Definition>
    </Query>
    <SeriesPalette>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>80</Red>
        <Green>166</Green>
        <Blue>218</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>242</Red>
        <Green>88</Green>
        <Blue>106</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>232</Red>
        <Green>172</Green>
        <Blue>57</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>128</Red>
        <Green>255</Green>
        <Blue>128</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>64</Red>
        <Green>128</Green>
        <Blue>128</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>128</Red>
        <Green>128</Green>
        <Blue>192</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>170</Red>
        <Green>85</Green>
        <Blue>85</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>128</Red>
        <Green>128</Green>
        <Blue>0</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>192</Red>
        <Green>192</Green>
        <Blue>192</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>255</Red>
        <Green>255</Green>
        <Blue>128</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>128</Red>
        <Green>192</Green>
        <Blue>128</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>7</Red>
        <Green>146</Green>
        <Blue>94</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>0</Red>
        <Green>128</Green>
        <Blue>255</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>255</Red>
        <Green>128</Green>
        <Blue>192</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>0</Red>
        <Green>255</Green>
        <Blue>255</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>255</Red>
        <Green>128</Green>
        <Blue>128</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>0</Red>
        <Green>128</Green>
        <Blue>192</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>255</Red>
        <Green>0</Green>
        <Blue>255</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>128</Red>
        <Green>64</Green>
        <Blue>64</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>255</Red>
        <Green>128</Green>
        <Blue>64</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>80</Red>
        <Green>240</Green>
        <Blue>120</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>0</Red>
        <Green>64</Green>
        <Blue>128</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>128</Red>
        <Green>0</Green>
        <Blue>64</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>255</Red>
        <Green>0</Green>
        <Blue>128</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>128</Red>
        <Green>128</Green>
        <Blue>64</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>128</Red>
        <Green>128</Green>
        <Blue>128</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>255</Red>
        <Green>128</Green>
        <Blue>255</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>0</Red>
        <Green>64</Green>
        <Blue>0</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>0</Red>
        <Green>0</Green>
        <Blue>0</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>255</Red>
        <Green>255</Green>
        <Blue>255</Blue>
      </Entries>
      <Entries xsi:type="attribute:ColorDefinition">
        <Transparency>255</Transparency>
        <Red>255</Red>
        <Green>128</Green>
        <Blue>0</Blue>
      </Entries>
    </SeriesPalette>
    <SeriesDefinitions>
      <Query>
        <Definition></Definition>
      </Query>
      <SeriesPalette>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>80</Red>
          <Green>166</Green>
          <Blue>218</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>242</Red>
          <Green>88</Green>
          <Blue>106</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>232</Red>
          <Green>172</Green>
          <Blue>57</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>128</Red>
          <Green>255</Green>
          <Blue>128</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>64</Red>
          <Green>128</Green>
          <Blue>128</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>128</Red>
          <Green>128</Green>
          <Blue>192</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>170</Red>
          <Green>85</Green>
          <Blue>85</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>128</Red>
          <Green>128</Green>
          <Blue>0</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>192</Red>
          <Green>192</Green>
          <Blue>192</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>255</Red>
          <Green>255</Green>
          <Blue>128</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>128</Red>
          <Green>192</Green>
          <Blue>128</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>7</Red>
          <Green>146</Green>
          <Blue>94</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>0</Red>
          <Green>128</Green>
          <Blue>255</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>255</Red>
          <Green>128</Green>
          <Blue>192</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>0</Red>
          <Green>255</Green>
          <Blue>255</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>255</Red>
          <Green>128</Green>
          <Blue>128</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>0</Red>
          <Green>128</Green>
          <Blue>192</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>255</Red>
          <Green>0</Green>
          <Blue>255</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>128</Red>
          <Green>64</Green>
          <Blue>64</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>255</Red>
          <Green>128</Green>
          <Blue>64</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>80</Red>
          <Green>240</Green>
          <Blue>120</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>0</Red>
          <Green>64</Green>
          <Blue>128</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>128</Red>
          <Green>0</Green>
          <Blue>64</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>255</Red>
          <Green>0</Green>
          <Blue>128</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>128</Red>
          <Green>128</Green>
          <Blue>64</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>128</Red>
          <Green>128</Green>
          <Blue>128</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>255</Red>
          <Green>128</Green>
          <Blue>255</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>0</Red>
          <Green>64</Green>
          <Blue>0</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>0</Red>
          <Green>0</Green>
          <Blue>0</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>255</Red>
          <Green>255</Green>
          <Blue>255</Blue>
        </Entries>
        <Entries xsi:type="attribute:ColorDefinition">
          <Transparency>255</Transparency>
          <Red>255</Red>
          <Green>128</Green>
          <Blue>0</Blue>
        </Entries>
      </SeriesPalette>
      <Series xsi:type="type:PieSeries">
        <Visible>true</Visible>
        <Label>
          <Caption>
            <Value></Value>
            <Font>
              <Alignment/>
            </Font>
          </Caption>
          <Background xsi:type="attribute:ColorDefinition">
            <Transparency>0</Transparency>
            <Red>255</Red>
            <Green>255</Green>
            <Blue>255</Blue>
          </Background>
          <Outline>
            <Style>Solid</Style>
            <Thickness>1</Thickness>
            <Color>
              <Transparency>255</Transparency>
              <Red>0</Red>
              <Green>0</Green>
              <Blue>0</Blue>
            </Color>
            <Visible>false</Visible>
          </Outline>
          <Insets>
            <Top>0.0</Top>
            <Left>2.0</Left>
            <Bottom>0.0</Bottom>
            <Right>3.0</Right>
          </Insets>
          <Visible>true</Visible>
        </Label>
        <DataDefinition>
          <Definition>row[&quot;count&quot;]</Definition>
          <Grouping>
            <GroupType>Text</GroupType>
            <AggregateExpression>Sum</AggregateExpression>
          </Grouping>
        </DataDefinition>
        <DataPoint>
          <Components>
            <Type>Orthogonal_Value</Type>
          </Components>
          <Separator>, </Separator>
        </DataPoint>
        <LabelPosition>Outside</LabelPosition>
        <Stacked>false</Stacked>
        <Triggers>
          <Condition>onmouseover</Condition>
          <Action>
            <Type>Show_Tooltip</Type>
            <Value xsi:type="attribute:TooltipValue">
              <Text></Text>
              <Delay>200</Delay>
            </Value>
          </Action>
        </Triggers>
        <Explosion>0</Explosion>
        <Title>
          <Caption>
            <Value></Value>
            <Font>
              <Size>16.0</Size>
              <Bold>true</Bold>
              <Alignment/>
            </Font>
          </Caption>
          <Background xsi:type="attribute:ColorDefinition">
            <Transparency>0</Transparency>
            <Red>255</Red>
            <Green>255</Green>
            <Blue>255</Blue>
          </Background>
          <Outline>
            <Style>Solid</Style>
            <Thickness>1</Thickness>
            <Color>
              <Transparency>255</Transparency>
              <Red>0</Red>
              <Green>0</Green>
              <Blue>0</Blue>
            </Color>
          </Outline>
          <Insets>
            <Top>0.0</Top>
            <Left>2.0</Left>
            <Bottom>0.0</Bottom>
            <Right>3.0</Right>
          </Insets>
          <Visible>true</Visible>
        </Title>
        <TitlePosition>Below</TitlePosition>
        <LeaderLineAttributes>
          <Style>Solid</Style>
          <Thickness>1</Thickness>
          <Visible>true</Visible>
        </LeaderLineAttributes>
        <LeaderLineLength>10.0</LeaderLineLength>
      </Series>
      <Grouping>
        <GroupType>Text</GroupType>
        <AggregateExpression>Sum</AggregateExpression>
      </Grouping>
    </SeriesDefinitions>
    <Series>
      <Visible>true</Visible>
      <Label>
        <Caption>
          <Value></Value>
          <Font>
            <Alignment/>
          </Font>
        </Caption>
        <Background xsi:type="attribute:ColorDefinition">
          <Transparency>0</Transparency>
          <Red>255</Red>
          <Green>255</Green>
          <Blue>255</Blue>
        </Background>
        <Outline>
          <Style>Solid</Style>
          <Thickness>1</Thickness>
          <Color>
            <Transparency>255</Transparency>
            <Red>0</Red>
            <Green>0</Green>
            <Blue>0</Blue>
          </Color>
          <Visible>false</Visible>
        </Outline>
        <Insets>
          <Top>0.0</Top>
          <Left>2.0</Left>
          <Bottom>0.0</Bottom>
          <Right>3.0</Right>
        </Insets>
        <Visible>false</Visible>
      </Label>
      <DataDefinition>
        <Definition>row[&quot;type_protection&quot;]</Definition>
      </DataDefinition>
      <SeriesIdentifier></SeriesIdentifier>
      <DataPoint>
        <Components>
          <Type>Orthogonal_Value</Type>
        </Components>
        <Separator>, </Separator>
      </DataPoint>
      <LabelPosition>Outside</LabelPosition>
      <Stacked>false</Stacked>
    </Series>
    <Grouping>
      <Enabled>true</Enabled>
      <GroupType>Text</GroupType>
      <AggregateExpression>Sum</AggregateExpression>
    </Grouping>
  </SeriesDefinitions>
</model:ChartWithoutAxes>
]]></xml-property>
                        <property name="outputFormat">SVG</property>
                        <property name="inheritColumns">false</property>
                        <property name="height">3.969in</property>
                        <property name="width">211.5pt</property>
                        <property name="dataSet">EBZR_Synth_Protection</property>
                        <list-property name="boundDataColumns">
                            <structure>
                                <property name="name">count</property>
                                <text-property name="displayName">count</text-property>
                                <expression name="expression" type="javascript">dataSetRow["count"]</expression>
                                <property name="dataType">decimal</property>
                            </structure>
                            <structure>
                                <property name="name">type_protection</property>
                                <text-property name="displayName">type_protection</text-property>
                                <expression name="expression" type="javascript">dataSetRow["type_protection"]</expression>
                                <property name="dataType">string</property>
                            </structure>
                        </list-property>
                    </extended-item>
                    <text name="Lien protection" id="222">
                        <property name="marginLeft">auto</property>
                        <property name="marginRight">auto</property>
                        <property name="width">90%</property>
                        <property name="contentType">html</property>
                        <text-property name="content"><![CDATA[<a href="http://www.legifrance.gouv.fr/affichCodeArticle.do?idArticle=LEGIARTI000006833715&amp;cidTexte=LEGITEXT000006074220" onclick="window.open(this.href); return false;">Article L.411-1 du Code de l'Environnement</a><BR>
<I>Pour plus d'informations, cliquer sur l'onglet Protection</I>]]></text-property>
                    </text>
                </cell>
                <cell id="26">
                    <property name="paddingLeft">0pt</property>
                    <property name="paddingRight">0pt</property>
                    <property name="width">50%</property>
                    <text name="Plus d'info bilan groupe d'espèce" id="703">
                        <property name="marginLeft">auto</property>
                        <property name="marginRight">auto</property>
                        <property name="width">90%</property>
                        <property name="contentType">html</property>
                        <text-property name="content"><![CDATA[<I>Pour plus d'informations, cliquer sur l'onglet liste des espèces tous status</I>]]></text-property>
                    </text>
                    <grid id="713">
                        <property name="marginTop">10px</property>
                        <property name="marginLeft">auto</property>
                        <property name="marginBottom">20pt</property>
                        <property name="marginRight">auto</property>
                        <property name="width">90%</property>
                        <column id="714">
                            <property name="width">3.46875in</property>
                        </column>
                        <column id="715">
                            <property name="width">2.5625in</property>
                        </column>
                        <row id="716">
                            <cell id="717">
                                <table name="EBZR_Tbl_Bilan_Milieux_Habitats" id="612">
                                    <property name="width">3.3229166666666665in</property>
                                    <property name="dataSet">EBZR_Synth_BilanMilieux</property>
                                    <list-property name="boundDataColumns">
                                        <structure>
                                            <property name="name">milieu</property>
                                            <text-property name="displayName">milieu</text-property>
                                            <expression name="expression" type="javascript">dataSetRow["milieu"]</expression>
                                            <property name="dataType">string</property>
                                        </structure>
                                        <structure>
                                            <property name="name">nbtot</property>
                                            <text-property name="displayName">nbtot</text-property>
                                            <expression name="expression" type="javascript">dataSetRow["nbtot"]</expression>
                                            <property name="dataType">decimal</property>
                                        </structure>
                                        <structure>
                                            <property name="name">superficie</property>
                                            <text-property name="displayName">superficie</text-property>
                                            <expression name="expression" type="javascript">dataSetRow["superficie"]</expression>
                                            <property name="dataType">float</property>
                                        </structure>
                                    </list-property>
                                    <column id="631">
                                        <property name="width">1.0520833333333333in</property>
                                    </column>
                                    <column id="632">
                                        <property name="width">1.15625in</property>
                                    </column>
                                    <column id="633">
                                        <property name="width">1.1145833333333333in</property>
                                    </column>
                                    <header>
                                        <row id="613">
                                            <property name="backgroundColor">#FFFFFF</property>
                                            <cell id="614">
                                                <text id="708">
                                                    <property name="backgroundColor">#E8E9EA</property>
                                                    <property name="contentType">auto</property>
                                                    <text-property name="content"><![CDATA[milieu]]></text-property>
                                                </text>
                                            </cell>
                                            <cell id="616">
                                                <label id="617">
                                                    <property name="backgroundColor">#E8E9EA</property>
                                                    <text-property name="text">nombre total</text-property>
                                                </label>
                                            </cell>
                                            <cell id="618">
                                                <label id="619">
                                                    <property name="backgroundColor">#E8E9EA</property>
                                                    <text-property name="text">superficie (ha)</text-property>
                                                </label>
                                            </cell>
                                        </row>
                                        <row id="709">
                                            <cell id="710"/>
                                            <cell id="711"/>
                                            <cell id="712"/>
                                        </row>
                                    </header>
                                    <detail>
                                        <row id="620">
                                            <cell id="621">
                                                <property name="borderBottomColor">#000000</property>
                                                <property name="borderBottomStyle">solid</property>
                                                <property name="borderBottomWidth">thin</property>
                                                <property name="borderLeftColor">#000000</property>
                                                <property name="borderLeftStyle">solid</property>
                                                <property name="borderLeftWidth">thin</property>
                                                <property name="borderRightColor">#000000</property>
                                                <property name="borderRightStyle">solid</property>
                                                <property name="borderRightWidth">thin</property>
                                                <property name="borderTopColor">#000000</property>
                                                <property name="borderTopStyle">solid</property>
                                                <property name="borderTopWidth">thin</property>
                                                <data id="622">
                                                    <property name="textAlign">left</property>
                                                    <property name="resultSetColumn">milieu</property>
                                                </data>
                                            </cell>
                                            <cell id="623">
                                                <property name="borderBottomColor">#000000</property>
                                                <property name="borderBottomStyle">solid</property>
                                                <property name="borderBottomWidth">thin</property>
                                                <property name="borderLeftColor">#000000</property>
                                                <property name="borderLeftStyle">solid</property>
                                                <property name="borderLeftWidth">thin</property>
                                                <property name="borderRightColor">#000000</property>
                                                <property name="borderRightStyle">solid</property>
                                                <property name="borderRightWidth">thin</property>
                                                <property name="borderTopColor">#000000</property>
                                                <property name="borderTopStyle">solid</property>
                                                <property name="borderTopWidth">thin</property>
                                                <data id="624">
                                                    <property name="textAlign">center</property>
                                                    <property name="resultSetColumn">nbtot</property>
                                                </data>
                                            </cell>
                                            <cell id="625">
                                                <property name="borderBottomColor">#000000</property>
                                                <property name="borderBottomStyle">solid</property>
                                                <property name="borderBottomWidth">thin</property>
                                                <property name="borderLeftColor">#000000</property>
                                                <property name="borderLeftStyle">solid</property>
                                                <property name="borderLeftWidth">thin</property>
                                                <property name="borderRightColor">#000000</property>
                                                <property name="borderRightStyle">solid</property>
                                                <property name="borderRightWidth">thin</property>
                                                <property name="borderTopColor">#000000</property>
                                                <property name="borderTopStyle">solid</property>
                                                <property name="borderTopWidth">thin</property>
                                                <data id="626">
                                                    <property name="textAlign">center</property>
                                                    <property name="resultSetColumn">superficie</property>
                                                </data>
                                            </cell>
                                        </row>
                                    </detail>
                                </table>
                                <text name="Titre bilan milieux et habitats" id="47">
                                    <property name="marginTop">20px</property>
                                    <property name="contentType">html</property>
                                    <text-property name="content"><![CDATA[<FONT size="4"><B>
Bilan milieux et habitats naturels
</B></FONT>]]></text-property>
                                </text>
                            </cell>
                            <cell id="718">
                                <text name="Plus d'info bilan milieux et habitats" id="704">
                                    <property name="marginTop">50pt</property>
                                    <property name="contentType">html</property>
                                    <text-property name="content"><![CDATA[<I>Pour plus d'informations, cliquez sur l'onglet "Habitats et milieux naturels"</I>]]></text-property>
                                </text>
                            </cell>
                        </row>
                    </grid>
                    <grid id="732">
                        <method name="onRender"><![CDATA[if(reportContext.getParameterValue("EchelonSup")=="0")
	this.getStyle().display = "none";]]></method>
                        <column id="733">
                            <property name="width">1.0416666666666667in</property>
                        </column>
                        <column id="742">
                            <property name="width">5.666666666666667in</property>
                        </column>
                        <row id="745">
                            <cell id="746">
                                <property name="colSpan">2</property>
                                <property name="rowSpan">1</property>
                                <property name="paddingLeft">0pt</property>
                                <property name="paddingRight">0pt</property>
                                <text id="748">
                                    <property name="contentType">html</property>
                                    <text-property name="content"><![CDATA[<hr>]]></text-property>
                                </text>
                            </cell>
                        </row>
                        <row id="734">
                            <cell id="735">
                                <property name="paddingLeft">0pt</property>
                                <property name="paddingRight">0pt</property>
                                <image id="744">
                                    <property name="height">69px</property>
                                    <property name="width">69px</property>
                                    <property name="source">file</property>
                                    <expression name="uri" type="constant">images/echelon_sup.png</expression>
                                    <list-property name="action">
                                        <structure>
                                            <property name="linkType">hyperlink</property>
                                            <property name="toolTip">Voir les espèces limitrophes à enjeu</property>
                                            <expression name="uri" type="constant">javascript:window.parent.Ext.getCmp('synthese_windows_enjeuxbiodiversitezone').tabs.activate(window.parent.Ext.getCmp('synthese_windows_enjeuxbiodiversitezone').tabs.items.get(7));</expression>
                                            <property name="targetWindow">_top</property>
                                        </structure>
                                    </list-property>
                                </image>
                            </cell>
                            <cell id="740">
                                <property name="paddingLeft">0pt</property>
                                <property name="paddingRight">0pt</property>
                                <text id="738">
                                    <property name="marginTop">10pt</property>
                                    <property name="contentType">html</property>
                                    <text-property name="content"><![CDATA[<B>N'oubliez pas de consulter la liste des espèces à enjeu présentes à l'échelon géographique supérieur et non trouvées dans la zone requêtée. Onglet espèces limitrophes.</B>]]></text-property>
                                </text>
                            </cell>
                        </row>
                        <row id="736">
                            <cell id="737">
                                <image id="743">
                                    <property name="marginTop">10pt</property>
                                    <property name="height">62px</property>
                                    <property name="width">62px</property>
                                    <property name="source">file</property>
                                    <expression name="uri" type="constant">images/gigogne.png</expression>
                                    <list-property name="action">
                                        <structure>
                                            <property name="linkType">hyperlink</property>
                                            <property name="toolTip">Consulter l'échelon supérieur</property>
                                            <expression name="uri" type="constant">javascript:window.parent.Ext.getCmp('synthese').nextEchelon();</expression>
                                            <property name="targetWindow">_self</property>
                                        </structure>
                                    </list-property>
                                </image>
                            </cell>
                            <cell id="741">
                                <text id="739">
                                    <property name="marginTop">10pt</property>
                                    <property name="contentType">html</property>
                                    <text-property name="content"><![CDATA[<B>Vous pouvez aussi consulter la synthèse à l'échelon géographique supérieur.</B>]]></text-property>
                                </text>
                            </cell>
                        </row>
                    </grid>
                </cell>
            </row>
        </grid>
        <grid id="2123">
            <list-property name="visibility">
                <structure>
                    <property name="format">all</property>
                    <expression name="valueExpr" type="javascript">params["region"].value=='FC' || params["region"].value=='B'</expression>
                </structure>
            </list-property>
            <column id="2124"/>
            <row id="2132">
                <property name="height">0.24166666666666667in</property>
                <cell id="2133"/>
            </row>
            <row id="2125">
                <property name="height">0.24166666666666667in</property>
                <cell id="2126">
                    <text id="2131">
                        <property name="fontSize">12pt</property>
                        <property name="fontWeight">bold</property>
                        <property name="color">#FF0000</property>
                        <property name="textAlign">left</property>
                        <property name="contentType">auto</property>
                        <text-property name="content"><![CDATA[Attention,]]></text-property>
                    </text>
                </cell>
            </row>
            <row id="2127">
                <cell id="2128">
                    <text id="2130">
                        <property name="contentType">auto</property>
                        <text-property name="content"><![CDATA[votre synthèse concerne un territoire à la fois en Bourgogne et en Franche-Comté, la menace affichée se base sur la liste rouge nationale. Vous pourrez retrouver les statuts de menace des listes régionales dans les onglets ‘Espèces triées par enjeu’ ou ‘Espèces tous statuts’.]]></text-property>
                    </text>
                </cell>
            </row>
            <row id="2134">
                <cell id="2135"/>
            </row>
        </grid>
    </body>
    <property name="pageVariables">
        <variable-element name="ListeIdObs">
            <expression name="value" type="javascript">"()"</expression>
            <property name="type">page</property>
        </variable-element>
        <variable-element name="GeomObs">
            <expression name="value" type="javascript">"()"</expression>
            <property name="type">page</property>
        </variable-element>
        <variable-element name="ListeIdZonage">
            <expression name="value" type="javascript">"()"</expression>
            <property name="type">page</property>
        </variable-element>
    </property>
</report>
